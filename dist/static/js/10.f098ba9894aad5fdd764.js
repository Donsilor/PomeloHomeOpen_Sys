webpackJsonp([10],{"4/mA":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("mvHQ"),a=i.n(n),r=i("Gu7T"),l=i.n(r),o=i("woOf"),s=i.n(o),c=i("UyAJ"),d={name:"Edite",props:{dialogVisible:{type:Boolean,default:!0},title:{type:String,default:"新增模板"},templateObj:{type:Object,default:function(){return{}}}},data:function(){return{localObj:{},itemList:[{isClick:0,isSave:0,key:1,xIndex:1,yIndex:1,color:""},{isClick:0,isSave:0,key:2,xIndex:2,yIndex:1,color:""},{isClick:0,isSave:0,key:3,xIndex:3,yIndex:1,color:""},{isClick:0,isSave:0,key:4,xIndex:4,yIndex:1,color:""},{isClick:0,isSave:0,key:5,xIndex:1,yIndex:2,color:""},{isClick:0,isSave:0,key:6,xIndex:2,yIndex:2,color:""},{isClick:0,isSave:0,key:7,xIndex:3,yIndex:2,color:""},{isClick:0,isSave:0,key:8,xIndex:4,yIndex:2,color:""},{isClick:0,isSave:0,key:9,xIndex:1,yIndex:3,color:""},{isClick:0,isSave:0,key:10,xIndex:2,yIndex:3,color:""},{isClick:0,isSave:0,key:11,xIndex:3,yIndex:3,color:""},{isClick:0,isSave:0,key:12,xIndex:4,yIndex:3,color:""},{isClick:0,isSave:0,key:13,xIndex:1,yIndex:4,color:""},{isClick:0,isSave:0,key:14,xIndex:2,yIndex:4,color:""},{isClick:0,isSave:0,key:15,xIndex:3,yIndex:4,color:""},{isClick:0,isSave:0,key:16,xIndex:4,yIndex:4,color:""}],ScreenArray:[],ItemArray:[],form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"90px"}},watch:{templateObj:{handler:function(e){var n=this;if(e.template){this.localObj=s()({},e);var t=JSON.parse(e.template);this.ScreenArray=t,"查看模板"===this.title?(this.itemList.forEach(function(e){e.isSave=1}),t.forEach(function(e,i){e[1].forEach(function(t){n.itemList.find(function(e){return e.key===t}).color=n.color(i+1)})})):"编辑模板"===this.title&&(this.itemList.forEach(function(e){e.isSave=1}),t.forEach(function(e,i){e[1].forEach(function(t){n.itemList.find(function(e){return e.key===t}).color=n.color(i+1)})}))}},immediate:!0}},methods:{color:function(e){var t="#3a8ee6";return 1===e?t="#668B8B":2===e?t="#FFDAB9":3===e?t="#23e01e":4===e?t="#b45342":5===e?t="#e2ce66":6===e?t="#808cde":7===e?t="#dc3dbb":8===e?t="#084e21":9===e?t="#ece5ab":10===e&&(t="#a07397"),t},save:function(){if(this.ItemArray.sort(function(e,t){return e.key-t.key}),0!==this.ItemArray.length){var e=this.ItemArray.map(function(e){return e.key}).slice(0),t=this.ItemArray.map(function(e){return e.xIndex}),i=this.ItemArray.map(function(e){return e.yIndex}),n=Math.max.apply(Math,l()(t))-Math.min.apply(Math,l()(t))+1,a=Math.max.apply(Math,l()(i))-Math.min.apply(Math,l()(i))+1;if(e.length===a*n){var r=[[n,a],e];this.ScreenArray.push(r);var o=this.ScreenArray.length,s=this.color(o);this.ItemArray.forEach(function(e){e.isSave=1,e.color=s}),this.ItemArray=[]}else this.$message.error("选择的方块不能组成矩形")}},itemCick:function(e){if(!e.isSave)if(e.isClick=0===e.isClick?1:0,e.isClick)this.ItemArray.push(e);else{var t=this.ItemArray.indexOf(e);this.ItemArray.splice(t,1)}},submit:function(){var t=this;if(this.localObj.name){if(this.itemList.every(function(e){return 1===e.isSave})){var e=1;"修改模板"===this.title&&(e=2),this.ScreenArray.sort(function(e,t){return e[1][0]-t[1][0]});var i=a()(this.ScreenArray),n={operator:e,id:this.localObj.id,template:i,name:this.localObj.name};Object(c.d)(n).then(function(e){t.$message.success("保存成功"),t.$emit("update:dialogVisible",!1),t.$emit("refresh")})}else this.$message.error("置屏幕不完整，请分配完所有的格子")}else this.$message.error("请输入模版名称")},reset:function(){this.ScreenArray=[],this.ItemArray=[],this.itemList=[{isClick:0,isSave:0,key:1,xIndex:1,yIndex:1,color:""},{isClick:0,isSave:0,key:2,xIndex:2,yIndex:1,color:""},{isClick:0,isSave:0,key:3,xIndex:3,yIndex:1,color:""},{isClick:0,isSave:0,key:4,xIndex:4,yIndex:1,color:""},{isClick:0,isSave:0,key:5,xIndex:1,yIndex:2,color:""},{isClick:0,isSave:0,key:6,xIndex:2,yIndex:2,color:""},{isClick:0,isSave:0,key:7,xIndex:3,yIndex:2,color:""},{isClick:0,isSave:0,key:8,xIndex:4,yIndex:2,color:""},{isClick:0,isSave:0,key:9,xIndex:1,yIndex:3,color:""},{isClick:0,isSave:0,key:10,xIndex:2,yIndex:3,color:""},{isClick:0,isSave:0,key:11,xIndex:3,yIndex:3,color:""},{isClick:0,isSave:0,key:12,xIndex:4,yIndex:3,color:""},{isClick:0,isSave:0,key:13,xIndex:1,yIndex:4,color:""},{isClick:0,isSave:0,key:14,xIndex:2,yIndex:4,color:""},{isClick:0,isSave:0,key:15,xIndex:3,yIndex:4,color:""},{isClick:0,isSave:0,key:16,xIndex:4,yIndex:4,color:""}]},close:function(){this.$emit("update:dialogVisible",!1)}}},A={render:function(){var i=this,e=i.$createElement,n=i._self._c||e;return n("el-dialog",{attrs:{visible:i.dialogVisible,title:i.title,center:"",width:"70%"},on:{close:i.close}},[n("div",{staticClass:"title"},[n("span",[i._v("屏幕配置名称：")]),i._v(" "),n("el-input",{attrs:{disabled:"查看模板"===i.title,autocomplete:"off"},model:{value:i.localObj.name,callback:function(e){i.$set(i.localObj,"name",e)},expression:"localObj.name"}})],1),i._v(" "),n("div",{staticClass:"full-screen"},i._l(i.itemList,function(t,e){return n("div",{key:e,staticClass:"screen-item",class:{click:t.isClick,isSave:t.isSave},style:{backgroundColor:t.color},on:{click:function(e){i.itemCick(t)}}},[i._v(i._s(e+1)+"\n    ")])})),i._v(" "),"查看模板"!==i.title?n("div",{staticClass:"button-contaier"},[n("button",{staticClass:"save-btn",on:{click:i.save}},[i._v("保存当前选中\n    ")]),i._v(" "),n("button",{staticClass:"save-btn",on:{click:i.reset}},[i._v("重置\n    ")])]):i._e(),i._v(" "),"查看模板"!==i.title?n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:i.close}},[i._v("取 消")]),i._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:i.submit}},[i._v("提 交\n    ")])],1):i._e()])},staticRenderFns:[]};var x=i("VU/8")(d,A,!1,function(e){i("ftVQ")},"data-v-30adb3ea",null);t.default=x.exports},"5zde":function(e,t,i){i("zQR9"),i("qyJz"),e.exports=i("FeBl").Array.from},Gu7T:function(e,t,i){"use strict";t.__esModule=!0;var n,a=i("c/Tr"),r=(n=a)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return(0,r.default)(e)}},UyAJ:function(e,t,i){"use strict";t.c=function(e){return Object(n.a)({url:"/api/ext/devcard/template",method:"get",data:e})},t.d=function(e){return Object(n.a)({url:"/api/ext/devcard/template",method:"post",data:e})},t.b=function(){return Object(n.a)({url:"/api/ext/devcard/size",method:"get"})},t.a=function(e){return Object(n.a)({url:"/api/ext/devcard/size",method:"post",data:e})};var n=i("Vo7i")},"c/Tr":function(e,t,i){e.exports={default:i("5zde"),__esModule:!0}},fBQ2:function(e,t,i){"use strict";var n=i("evD5"),a=i("X8DO");e.exports=function(e,t,i){t in e?n.f(e,t,a(0,i)):e[t]=i}},ftVQ:function(e,t,i){var n=i("m/OP");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("69894e7f",n,!0)},"m/OP":function(e,t,i){(e.exports=i("FZ+f")(!0)).push([e.i,".el-input[data-v-30adb3ea]{width:300px}.full-screen[data-v-30adb3ea]{width:410px;height:410px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:10px auto}.title[data-v-30adb3ea]{width:50%;margin:15px auto}.el-button[data-v-30adb3ea]{margin-right:15px;font-size:16px}.screen-item[data-v-30adb3ea]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100px;height:100px;text-align:center;line-height:100px;border:1px solid #add8e6}.button-contaier[data-v-30adb3ea]{width:250px;margin:10px auto}.click[data-v-30adb3ea]{background:#cbcbcb}.isSave[data-v-30adb3ea]{background:gray}.save-btn[data-v-30adb3ea]{margin:20px}","",{version:3,sources:["F:/A-PRODUCT/PomeloHomeOpen_Sys/src/views/ScreenManageMent/edite.vue"],names:[],mappings:"AACA,2BACG,WAAa,CACf,AACD,8BACG,YAAa,AACb,aAAc,AACd,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,8BAA+B,AAC/B,6BAA8B,AAC1B,uBAAwB,AACpB,mBAAoB,AAC5B,mBAAoB,AAChB,eAAgB,AACpB,gBAAkB,CACpB,AACD,wBACG,UAAW,AACX,gBAAkB,CACpB,AACD,4BACG,kBAAmB,AACnB,cAAgB,CAClB,AACD,8BACG,yBAAyB,AACtB,sBAAsB,AACrB,qBAAqB,AACjB,iBAAiB,AACzB,YAAa,AACb,aAAc,AACd,kBAAmB,AACnB,kBAAmB,AACnB,wBAA4B,CAC9B,AACD,kCACE,YAAa,AACb,gBAAkB,CACnB,AACD,wBACG,kBAAoB,CACtB,AACD,yBACG,eAAiB,CACnB,AACD,2BACG,WAAa,CACf",file:"edite.vue",sourcesContent:["\n.el-input[data-v-30adb3ea]{\n   width: 300px;\n}\n.full-screen[data-v-30adb3ea] {\n   width: 410px;\n   height: 410px;\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-orient: horizontal;\n   -webkit-box-direction: normal;\n       -ms-flex-direction: row;\n           flex-direction: row;\n   -ms-flex-wrap: wrap;\n       flex-wrap: wrap;\n   margin: 10px auto;\n}\n.title[data-v-30adb3ea]{\n   width:50% ;\n   margin: 15px auto;\n}\n.el-button[data-v-30adb3ea]{\n   margin-right: 15px;\n   font-size: 16px;\n}\n.screen-item[data-v-30adb3ea] {\n   -webkit-user-select:none;\n      -moz-user-select:none;\n       -ms-user-select:none;\n           user-select:none;\n   width: 100px;\n   height: 100px;\n   text-align: center;\n   line-height: 100px;\n   border: 1px solid lightblue;\n}\n.button-contaier[data-v-30adb3ea]{\n  width: 250px;\n  margin: 10px auto;\n}\n.click[data-v-30adb3ea] {\n   background: #cbcbcb;\n}\n.isSave[data-v-30adb3ea] {\n   background: gray;\n}\n.save-btn[data-v-30adb3ea] {\n   margin: 20px;\n}\n"],sourceRoot:""}])},qyJz:function(e,t,i){"use strict";var y=i("+ZMJ"),n=i("kM2E"),v=i("sB3e"),f=i("msXi"),k=i("Mhyx"),m=i("QRG4"),p=i("fBQ2"),C=i("3fs2");n(n.S+n.F*!i("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e,t,i){var n,a,r,o,s=v(e),l="function"==typeof this?this:Array,c=arguments.length,d=1<c?t:void 0,A=void 0!==d,x=0,u=C(s);if(A&&(d=y(d,2<c?i:void 0,2)),null==u||l==Array&&k(u))for(a=new l(n=m(s.length));x<n;x++)p(a,x,A?d(s[x],x):s[x]);else for(o=u.call(s),a=new l;!(r=o.next()).done;x++)p(a,x,A?f(o,d,[r.value,x],!0):r.value);return a.length=x,a}})}});