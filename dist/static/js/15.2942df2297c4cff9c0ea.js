webpackJsonp([15],{"+P/7":function(e,a,t){a=e.exports=t("FZ+f")(!0),a.push([e.i,".addCategoryPage .desTitleTop{border-bottom:1px solid #ddd;line-height:30px;height:30px;width:100%}.addCategoryPage .channel .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden;width:110px;height:110px}.addCategoryPage .channel .el-upload:hover{border-color:#409eff}.addCategoryPage .avatar-uploader-icon{font-size:22px;color:#8c939d;width:110px;height:110px;line-height:110px;text-align:center}.addCategoryPage .avatar-uploader{display:inline-block;margin-right:15px}.addCategoryPage .avatar-uploader:last-child{margin-right:0}.addCategoryPage .avatar{width:110px;height:110px;display:block}.addCategoryPage .line25 .el-form-item__label{line-height:25px}.addCategoryPage .el-icon-delete{cursor:pointer}.addCategoryPage .el-form-item__error{padding:5px 15px!important}.addCategoryPage .fileuploadItem{display:table-cell;position:relative}.addCategoryPage .fileuploadItem .disabled .el-upload{background-color:#f5f7fa;cursor:not-allowed}.addCategoryPage .fileuploadItem:last-child .avatar-uploader{margin-right:0!important}.addCategoryPage .fileuploadItem .file_upload_img_des{position:absolute;top:109px;text-align:center;color:#999;font-size:12px;left:57px;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:110px}.addCategoryPage .el-tooltip__popper{max-width:300px}.ttips{color:#999;font-size:12px;margin:0;padding:0}","",{version:3,sources:["D:/workspace/PomeloHomeOpen_Sys/src/views/typeManagement/channelDetail.vue"],names:[],mappings:"AACA,8BACE,6BAA8B,AAC9B,iBAAkB,AAClB,YAAa,AACb,UAAY,CACb,AACD,qCACE,0BAA2B,AAC3B,kBAAmB,AACnB,eAAgB,AAChB,kBAAmB,AACnB,gBAAiB,AACjB,YAAa,AACb,YAAc,CACf,AACD,2CACE,oBAAsB,CACvB,AACD,uCACE,eAAgB,AAChB,cAAe,AACf,YAAa,AACb,aAAc,AACd,kBAAmB,AACnB,iBAAmB,CACpB,AACD,kCACE,qBAAsB,AACtB,iBAAmB,CACpB,AACD,6CACE,cAAkB,CACnB,AACD,yBACE,YAAa,AACb,aAAc,AACd,aAAe,CAChB,AACD,8CACE,gBAAkB,CACnB,AACD,iCACE,cAAgB,CACjB,AACD,sCACE,0BAA6B,CAC9B,AACD,iCACE,mBAAoB,AACpB,iBAAmB,CACpB,AACD,sDACE,yBAA0B,AAC1B,kBAAoB,CACrB,AACD,6DACE,wBAA6B,CAC9B,AACD,sDACE,kBAAmB,AACnB,UAAW,AACX,kBAAmB,AACnB,WAAY,AACZ,eAAgB,AAChB,UAAW,AACX,mCAAoC,AAC5B,2BAA4B,AACpC,WAAa,CACd,AACD,qCACE,eAAiB,CAClB,AACD,OACE,WAAY,AACZ,eAAgB,AAChB,SAAU,AACV,SAAW,CACZ",file:"channelDetail.vue",sourcesContent:["\n.addCategoryPage .desTitleTop {\n  border-bottom: 1px #ddd solid;\n  line-height: 30px;\n  height: 30px;\n  width: 100%;\n}\n.addCategoryPage .channel .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  width: 110px;\n  height: 110px;\n}\n.addCategoryPage .channel .el-upload:hover {\n  border-color: #409EFF;\n}\n.addCategoryPage .avatar-uploader-icon {\n  font-size: 22px;\n  color: #8c939d;\n  width: 110px;\n  height: 110px;\n  line-height: 110px;\n  text-align: center;\n}\n.addCategoryPage .avatar-uploader {\n  display: inline-block;\n  margin-right: 15px;\n}\n.addCategoryPage .avatar-uploader:last-child {\n  margin-right: 0px;\n}\n.addCategoryPage .avatar {\n  width: 110px;\n  height: 110px;\n  display: block;\n}\n.addCategoryPage .line25 .el-form-item__label {\n  line-height: 25px;\n}\n.addCategoryPage .el-icon-delete {\n  cursor: pointer;\n}\n.addCategoryPage .el-form-item__error {\n  padding: 5px 15px !important;\n}\n.addCategoryPage .fileuploadItem {\n  display: table-cell;\n  position: relative;\n}\n.addCategoryPage .fileuploadItem .disabled .el-upload {\n  background-color: #f5f7fa;\n  cursor: not-allowed;\n}\n.addCategoryPage .fileuploadItem:last-child .avatar-uploader {\n  margin-right: 0px !important;\n}\n.addCategoryPage .fileuploadItem .file_upload_img_des {\n  position: absolute;\n  top: 109px;\n  text-align: center;\n  color: #999;\n  font-size: 12px;\n  left: 57px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  width: 110px;\n}\n.addCategoryPage .el-tooltip__popper {\n  max-width: 300px;\n}\n.ttips {\n  color: #999;\n  font-size: 12px;\n  margin: 0;\n  padding: 0;\n}\n"],sourceRoot:""}])},"C+Vd":function(e,a,t){"use strict";function r(e){t("oVMW")}Object.defineProperty(a,"__esModule",{value:!0});var o=t("xyFC"),n=t("IGkk"),i=t("VU/8"),l=r,s=i(o.a,n.a,!1,l,null,null);a.default=s.exports},E4LH:function(e,a,t){"use strict";function r(e){var a=/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/;return console.log("用户名验证",a.test(e)),a.test(e)}function o(e,a,t){var r=!0;if(!a)return void t();for(var o=0;o<a.length;o++){var n=a.charCodeAt(o);if(!(n>=65&&n<=90||n>=97&&n<=122||95==n)){r=!1,t("只能是字母下划线");break}}r&&t()}function n(e,a,t){var r=!0;if(!a)return void t();for(var o=0;o<a.length;o++){var n=/[\u4e00-\u9fa5a-zA-Z]+/g,i=a.charAt(o);if(!n.test(i)){r=!1,t("只能是中文字母");break}}r&&t()}a.a=r,a.c=o,a.b=n},IGkk:function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container calendar-list-container addCategoryPage"},[t("el-row",{attrs:{gutter:30}},[t("el-col",{attrs:{span:24}},[t("el-button",{attrs:{type:"ghost"},on:{click:e.handleBackEvent}},[e._v("返回")]),e._v(" "),e.isEdit?e._e():t("el-button",{attrs:{type:"primary"},on:{click:e.addChannel}},[e._v("确定并添加该渠道商")]),e._v(" "),e.isEdit?t("el-button",{attrs:{type:"primary"},on:{click:e.editChannel}},[e._v(e._s(e.editText))]):e._e()],1),e._v(" "),t("el-col",{staticStyle:{margin:"20px 0px","padding-bottom":"40px"},attrs:{span:24}},[t("div",{staticClass:"desTitleTop"},[e._v("基本信息")]),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form",{ref:"ruleForm",staticStyle:{"margin-top":"20px"},attrs:{rules:e.rules,model:e.form,"label-width":"80px",size:"large"}},[t("el-form-item",{attrs:{label:"渠道商名称","label-width":"120px",prop:"name"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{span:6,disabled:e.disabled,placeholder:" 中文名限中文、字母、32个字符、区分大小写"},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"渠道商英文","label-width":"120px",prop:"name_e"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{disabled:e.disabled,span:6,placeholder:" 字母、下划线, 最多32个字符，区分大小写"},model:{value:e.form.name_e,callback:function(a){e.$set(e.form,"name_e",a)},expression:"form.name_e"}})],1)],1),e._v(" "),t("el-form-item",{staticStyle:{"padding-bottom":"30px"},attrs:{label:"渠道商logo","label-width":"120px"}},[t("el-col",{attrs:{span:12}},[t("p",{staticClass:"ttips"},[e._v("图标要求格式png，logo以外区域透明，大小5M以内")]),e._v(" "),t("div",{staticClass:"fileuploadItem channel"},[t("el-upload",{staticClass:"avatar-uploader",class:e.disabled?"disabled":"",attrs:{action:"/api/index.php/files/save","show-file-list":!1,"on-success":e.handleLogoSuccess,"before-upload":e.beforeLogoUpload,accept:"image/png",disabled:e.disabled,data:e.logo}},[""!=e.form.logo.url?t("img",{staticClass:"avatar",attrs:{src:e.form.logo.url}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)])],1),e._v(" "),t("el-form-item",{staticStyle:{"padding-bottom":"30px"},attrs:{label:"二维码","label-width":"120px"}},[t("el-col",{attrs:{span:12}},[t("p",{staticClass:"ttips"},[e._v("图标要求格式png、jpg、jpeg、gif、bmp，大小5M以内")]),e._v(" "),t("div",{staticClass:"fileuploadItem channel"},[t("el-upload",{staticClass:"avatar-uploader",class:e.disabled?"disabled":"",attrs:{action:"/api/index.php/files/save","show-file-list":!1,"on-success":e.handleQrSuccess,"before-upload":e.beforeQrUpload,accept:"image/*",disabled:e.disabled,data:e.qrcode}},[""!=e.form.qrcode.url?t("img",{staticClass:"avatar",attrs:{src:e.form.qrcode.url}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)])],1)],1)],1)],1)],1)],1)},o=[],n={render:r,staticRenderFns:o};a.a=n},VSB1:function(e,a,t){"use strict";var r=t("woOf"),o=t.n(r),n=t("pFYg"),i=t.n(n);a.a={hasClass:function(e,a){return e.className&&e.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))},addClass:function(e,a){this.hasClass(e,a)||(e.className=(e.className+" "+a).replace("  "," ").trim())},removeClass:function(e,a){if(this.hasClass(e,a)){var t=new RegExp("(\\s|^)"+a+"(\\s|$)");e.className=e.className.replace(t," ").replace("  "," ").trim()}},toggleClass:function(e,a){this.hasClass(e,a)?this.removeClass(e,a):this.addClass(e,a)},getSearches:function(){var e={};return location.search.replace(/^\?/,"").split("&").forEach(function(a){var t=a.split("=");e[t[0]]=decodeURIComponent(t[1])}),e},getSearch:function(e){return this.getSearches()[e]},serialize:function(e){var a=[];if("object"!==(void 0===e?"undefined":i()(e)))return"";for(var t in e)a.push(t+"="+encodeURIComponent(e[t]));return a.join("&")},unserialize:function(e){var a={};if(!e)return a;for(var t=e.split("&"),r=0,o=t.length;r<o;r++){var n=t[r],i=n.split("=");a[i[0]]=isNaN(i[1])?decodeURIComponent(i[1]):i[1]}return a},getElementByClassName:function(e){var a=new Array,t=document.getElementsByTagName("*"),r=0;for(var o in t)1==t[o].nodeType&&t[o].getAttribute("class")==e&&(a[r]=t[o],r++);return a},validateString:function(e,a,t,r){var o=!0,n="";return a&&0!=a.trim().length?r instanceof RegExp&&(r.test(a)||(o=!1,n=e+"格式错误")):t&&(o=!1,n="请输入"+e),{validity:o,msg:n}},spanAnalyseData:function(e,a,t){var r=0;t[e.nodeid]={index:a.length,children:{}},e.list.forEach(function(t){var n=0;"3"!=t.key_type?(r++,a.push(o()({nodeid:e.nodeid,attr_id:e.attr_id,is_enable:e.is_enable},t))):t.remark.forEach(function(o,i){r++,n++,a.push({nodeid:e.nodeid,attr_id:e.attr_id,is_enable:e.is_enable,method_string:t.method_string,key:t.key,type:t.type,value_list:t.value_list[i].value_list,remark:o.remark})})}),t[e.nodeid].len=r},spanMethod:function(e,a,t){return(0==a||3==a)&&e?e.index==t?[e.len,1]:[0,0]:[1,1]}}},oVMW:function(e,a,t){var r=t("+P/7");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("rjj0")("f292660e",r,!0)},xyFC:function(e,a,t){"use strict";var r=t("woOf"),o=t.n(r),n=t("zL8q"),i=(t.n(n),t("Vo7i")),l=(t("VSB1"),t("TIfe")),s=t("E4LH");a.a={name:"channelDetail",computed:{},created:function(){this.isEdit&&this.getChannelInfo()},mounted:function(){},data:function(){return{isEdit:!!this.$route.query.id,token:Object(l.a)(),isLoadData:!1,editText:"编辑渠道商信息",disabled:!!this.$route.query.id,id:this.$route.query.id?this.$route.query.id:"",form:{id:this.$route.query.id,name:"",name_e:"",logo:{id:"",type:27,object:"",filename:"",url:"",md5:""},qrcode:{id:"",type:28,object:"",filename:"",url:"",md5:""}},rules:{name:[{required:!0,message:"请输入渠道商名称",trigger:"blur"},{max:32,message:"渠道商名称不能超过32个字符",trigger:"blur"},{validator:s.b}],name_e:[{required:!0,message:"请输入渠道商英文",trigger:"blur"},{max:32,message:"渠道商英文不能超过32个字符",trigger:"blur"},{validator:s.c}]},logo:{token:Object(l.a)(),type:27},qrcode:{token:Object(l.a)(),type:28}}},methods:{getChannelInfo:function(){var e=this;Object(i.a)({url:"/distributor/info",method:"post",data:{id:this.$route.query.id}}).then(function(a){e.form.name=a.name,e.form.name_e=a.name_e,e.form.logo=a.logo,e.form.qrcode=a.qrcode})},handleLogoSuccess:function(e,a){if(200!==e.code)return void this.$message.error(e.msg);var t=o()({},e.result);t.url=t.file_url,this.form.logo=t},handleQrSuccess:function(e,a){if(200!==e.code)return void this.$message.error(e.msg);var t=o()({},e.result);t.url=t.file_url,this.form.qrcode=t},beforeLogoUpload:function(e){var a="image/png"===e.type,t=e.size/1024/1024<5;return a||this.$message.error("请上传5M大小内PNG格式的logo"),t||this.$message.error("请上传5M大小内PNG格式的logo"),a&&t},beforeQrUpload:function(e){var a=e.size/1024/1024<5;return a||this.$message.error("请上传5M大小内的二维码图标"),a},editChannel:function(){var e=this;if(this.disabled)return this.editText="确认并提交修改",this.disabled=!1,!1;this.$refs.ruleForm.validate(function(a){if(a){if(""==e.form.logo.url||""==e.form.qrcode.url)return void e.$message.error("请上传渠道商logo和二维码！");e.$confirm("是否确认保存修改后渠道商信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.a)({url:"/distributor/edit",method:"post",data:e.form}).then(function(a){e.$message({type:"success",message:"保存成功!"})}).catch(function(a){e.$message({type:"error",message:a.msg})})})}})},addChannel:function(){var e=this;this.$refs.ruleForm.validate(function(a){if(a){if(""==e.form.logo.url||""==e.form.qrcode.url)return void e.$message.error("请上传渠道商logo和二维码！");e.$confirm("是否确定添加该渠道商？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.a)({url:"/distributor/add",method:"post",data:e.form}).then(function(a){e.$message({type:"success",message:"保存成功!"}),setTimeout(function(){e.$router.push({path:"/typeManagement/channelManager"})},2e3)}).catch(function(a){e.$message({type:"error",message:a.msg})})})}})},handleBackEvent:function(){this.$router.push({path:"/typeManagement/channelManager"})}},components:{}}}});
//# sourceMappingURL=15.2942df2297c4cff9c0ea.js.map