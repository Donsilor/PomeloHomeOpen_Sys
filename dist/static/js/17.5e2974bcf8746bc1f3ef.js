webpackJsonp([17],{"7/K4":function(e,t,a){t=e.exports=a("FZ+f")(!0),t.push([e.i,".addDevice .el-form-item__error{padding:5px 15px!important}.addDevice .title{height:30px;border-bottom:1px solid #ededed;width:80%;margin-bottom:30px}.addDevice .upload-container{float:right;margin-left:20px}.addDevice .flex{display:-webkit-box;display:-ms-flexbox;display:flex}.addDevice .desTitle{display:inline-block;padding-right:15px;color:#5a5e66;min-width:81px}.addDevice .add1TextArea{display:inline-block;vertical-align:bottom;margin-top:0}.addDevice .marT20{margin-top:20px}.app-container{padding:20px 40px}","",{version:3,sources:["D:/workspace/PomeloHomeOpen_Sys/src/views/typeManagement/addDevice.vue"],names:[],mappings:"AACA,gCACE,0BAA6B,CAC9B,AACD,kBACE,YAAa,AACb,gCAAiC,AACjC,UAAW,AACX,kBAAoB,CACrB,AACD,6BACE,YAAa,AACb,gBAAkB,CACnB,AACD,iBACE,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACf,AACD,qBACE,qBAAsB,AACtB,mBAAoB,AACpB,cAAe,AACf,cAAgB,CACjB,AACD,yBACE,qBAAsB,AACtB,sBAAuB,AACvB,YAAgB,CACjB,AACD,mBACE,eAAiB,CAClB,AACD,eACE,iBAAmB,CACpB",file:"addDevice.vue",sourcesContent:["\n.addDevice .el-form-item__error {\n  padding: 5px 15px !important;\n}\n.addDevice .title {\n  height: 30px;\n  border-bottom: 1px #ededed solid;\n  width: 80%;\n  margin-bottom: 30px;\n}\n.addDevice .upload-container {\n  float: right;\n  margin-left: 20px;\n}\n.addDevice .flex {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.addDevice .desTitle {\n  display: inline-block;\n  padding-right: 15px;\n  color: #5a5e66;\n  min-width: 81px;\n}\n.addDevice .add1TextArea {\n  display: inline-block;\n  vertical-align: bottom;\n  margin-top: 0px;\n}\n.addDevice .marT20 {\n  margin-top: 20px;\n}\n.app-container {\n  padding: 20px 40px;\n}\n"],sourceRoot:""}])},ALge:function(e,t,a){var i=a("7/K4");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("b65ba3e0",i,!0)},I0YE:function(e,t,a){"use strict";var i=a("zL8q"),s=(a.n(i),a("Vo7i")),n=(a("VSB1"),a("TIfe"));t.a={name:"addDevice",computed:{},created:function(){},mounted:function(){this.getDeviceSelect(),this.getDeviceSelectAddtype()},data:function(){return{lists:"",typeid:this.$route.query.id,token:Object(n.a)(),product:{},type:{},business:{},brand:{},model:{},form:{type:"",id_type:"",business:"",brand:"",id:"",base_des:"",add_type:"",base_img:{type:23,token:Object(n.a)()},add1_tips:"",add1_button:"",add1_img:{type:"24",token:Object(n.a)(),filename:""},add2_img:{type:"24",token:Object(n.a)(),filename:""},add2_tips:"",reset_img:{type:"25",token:Object(n.a)(),filename:""},reset_tips:""},rules:{type:[{required:!0,message:"请选择产品品类",trigger:"change"}],add_type:[{required:!0,message:"请选择设备添加方式",trigger:"change"}],"add1_img.filename":[{validator:function(e,t,a,i,s){var n=[];t||a("添加方式的图片不能为空"),a(n)}}],add1_tips:[{required:!0,message:"请输入提示文字",trigger:"blur"},{max:64,message:"提示文字不能超过64个字符",trigger:"blur"}],add1_button:[{required:!0,message:"请输入按钮文字",trigger:"blur"},{max:8,message:"按钮文字不能超过8个字符",trigger:"blur"}],"add2_img.filename":[{validator:function(e,t,a,i,s){var n=[];t||a("添加方式的图片不能为空"),a(n)}}],add2_tips:[{required:!0,message:"请输入提示文字",trigger:"blur"},{max:64,message:"提示文字不能超过64个字符",trigger:"blur"}],"reset_img.filename":[{validator:function(e,t,a,i,s){var n=[];t||a("重置方式的图片不能为空"),a(n)}}],reset_tips:[{required:!0,message:"请输入重置提示文字",trigger:"blur"},{max:64,message:"重置提示文字不能超过64个字符",trigger:"blur"}]},deviceAddTypeList:[]}},methods:{changeType:function(e){console.log(e),this.business=this.lists.find(function(t){return t.type_id===e}).business,this.form.business="",this.form.brand="",this.form.id="",console.log(this.business)},changeBusiness:function(e){this.brand=this.business.find(function(t){return t.business_id===e}).brand,this.form.brand="",this.form.id="",console.log(this.brand)},changeBrand:function(e){this.model=this.brand[0].model,this.form.id="",console.log(this.model)},handleAvatarSuccess:function(e,t){var a=e.result;switch(a.type){case 23:this.form.base_img=a,this.form.base_img.token=this.token;break;case 25:this.form.reset_img=a,this.form.reset_img.token=this.token}this.$message({type:"success",message:"上传成功！"})},handleAddImg1Success:function(e,t){this.form.add1_img=e.result,this.form.add1_img.token=this.token,this.$message({type:"success",message:"上传成功！"})},handleAddImg2Success:function(e,t){this.form.add2_img=e.result,this.form.add2_img.token=this.token,this.$message({type:"success",message:"上传成功！"})},beforeAvatarUpload:function(e){console.log(e);var t="image/jpeg"===e.type||"image/jpg"||"image/png",a=e.size/1024/1024<5;return t&&a?void 0:(this.$message.error("请上传5M大小内JEPG、JPG、PNG格式的文件"),!1)},getDeviceSelect:function(){var e=this;Object(s.a)({url:"/device/deviceSelect",method:"post",data:{token:this.token}}).then(function(t){e.type=t,e.lists=t})},getDeviceSelectAddtype:function(){var e=this;Object(s.a)({url:"/device/deviceAddtype",method:"post",data:{token:this.token}}).then(function(t){e.deviceAddTypeList=t})},handleBackEvent:function(){this.$router.push({path:"/typeManagement/deviceManager"})},confirmDevice:function(){var e=this;this.$refs.ruleForm.validate(function(t){console.log(t),t?(e.form.id_type=e.form.id?2:1,e.form.id=e.form.id?e.form.id:e.form.type,console.log(e.form.id_type),Object(s.a)({url:"/device/deviceAdd",method:"post",data:e.form}).then(function(t){e.$message({type:"success",message:"新增设备成功！"}),setTimeout(function(){e.$router.push({path:"/typeManagement/deviceManager"})},2e3)}).catch(function(t){e.$message({type:"error",message:t.msg}),e.form.id=""})):e.$message({type:"error",message:"请完整填写表单再提交！"})})}},components:{}}},VSB1:function(e,t,a){"use strict";var i=a("woOf"),s=a.n(i),n=a("pFYg"),r=a.n(n);t.a={hasClass:function(e,t){return e.className&&e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){this.hasClass(e,t)||(e.className=(e.className+" "+t).replace("  "," ").trim())},removeClass:function(e,t){if(this.hasClass(e,t)){var a=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(a," ").replace("  "," ").trim()}},toggleClass:function(e,t){this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)},getSearches:function(){var e={};return location.search.replace(/^\?/,"").split("&").forEach(function(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}),e},getSearch:function(e){return this.getSearches()[e]},serialize:function(e){var t=[];if("object"!==(void 0===e?"undefined":r()(e)))return"";for(var a in e)t.push(a+"="+encodeURIComponent(e[a]));return t.join("&")},unserialize:function(e){var t={};if(!e)return t;for(var a=e.split("&"),i=0,s=a.length;i<s;i++){var n=a[i],r=n.split("=");t[r[0]]=isNaN(r[1])?decodeURIComponent(r[1]):r[1]}return t},getElementByClassName:function(e){var t=new Array,a=document.getElementsByTagName("*"),i=0;for(var s in a)1==a[s].nodeType&&a[s].getAttribute("class")==e&&(t[i]=a[s],i++);return t},validateString:function(e,t,a,i){var s=!0,n="";return t&&0!=t.trim().length?i instanceof RegExp&&(i.test(t)||(s=!1,n=e+"格式错误")):a&&(s=!1,n="请输入"+e),{validity:s,msg:n}},spanAnalyseData:function(e,t,a){var i=0;a[e.nodeid]={index:t.length,children:{}},e.list.forEach(function(a){var n=0;"3"!=a.key_type?(i++,t.push(s()({nodeid:e.nodeid,attr_id:e.attr_id},a))):a.remark.forEach(function(s,r){i++,n++,t.push({nodeid:e.nodeid,attr_id:e.attr_id,method_string:a.method_string,key:a.key,type:a.type,value_list:a.value_list[r].value_list,remark:s.remark})})}),a[e.nodeid].len=i},spanMethod:function(e,t,a){return 0==t&&e?e.index==a?[e.len,1]:[0,0]:[1,1]}}},aSrj:function(e,t,a){"use strict";function i(e){a("ALge")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("I0YE"),n=a("q6wD"),r=a("VU/8"),l=i,o=r(s.a,n.a,!1,l,null,null);t.default=o.exports},q6wD:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container calendar-list-container addDevice"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{type:"ghost"},on:{click:e.handleBackEvent}},[e._v("返回")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmDevice}},[e._v("确认并添加该设备")])],1),e._v(" "),a("el-col",{staticStyle:{margin:"20px 0px","padding-bottom":"40px"},attrs:{span:24}},[a("el-form",{ref:"ruleForm",staticStyle:{"margin-top":"20px"},attrs:{rules:e.rules,model:e.form,"label-width":"80px",size:"large","label-position":"left"}},[a("div",{staticClass:"title"},[e._v("基本信息")]),e._v(" "),a("el-form-item",{attrs:{label:"品类","label-width":"120px",prop:"type"}},[a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择产品品类"},on:{change:e.changeType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.type,function(e){return a("el-option",{key:e.type_id,attrs:{label:e.type_name,value:e.type_id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"厂商","label-width":"120px"}},[a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择厂商"},on:{change:e.changeBusiness},model:{value:e.form.business,callback:function(t){e.$set(e.form,"business",t)},expression:"form.business"}},e._l(e.business,function(e){return a("el-option",{key:e.business_id,attrs:{label:e.business_name,value:e.business_id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌","label-width":"120px"}},[a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择品牌"},on:{change:e.changeBrand},model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand",t)},expression:"form.brand"}},e._l(e.brand,function(e){return a("el-option",{key:e.brand_id,attrs:{label:e.brand_name,value:e.brand_id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"型号","label-width":"120px"}},[a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择型号"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}},e._l(e.model,function(e){return a("el-option",{key:e.product_id,attrs:{label:e.model,value:e.product_id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"产品图片","label-width":"120px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{readonly:"",placeholder:"图片支持jpeg、jpg、png格式，大小5M内"},model:{value:e.form.base_img.filename,callback:function(t){e.$set(e.form.base_img,"filename",t)},expression:"form.base_img.filename"}}),e._v(" "),a("el-upload",{staticClass:"upload-container",attrs:{action:"/api/index.php/files/save","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,accept:"image/png,image/jpeg,image/jpg",data:e.form.base_img}},[a("el-button",{attrs:{size:"middle",type:"primary"}},[e._v("选择文件")])],1)],1)])],1),e._v(" "),a("el-form-item",{attrs:{label:"其他说明","label-width":"120px"}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"请输入其他说明"},model:{value:e.form.base_des,callback:function(t){e.$set(e.form,"base_des",t)},expression:"form.base_des"}})],1)],1),e._v(" "),a("div",{staticClass:"title"},[e._v("添加方式")]),e._v(" "),a("el-form-item",{attrs:{label:"设备添加方式","label-width":"120px",prop:"add_type"}},[a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择添加方式"},model:{value:e.form.add_type,callback:function(t){e.$set(e.form,"add_type",t)},expression:"form.add_type"}},e._l(e.deviceAddTypeList,function(e){return a("el-option",{key:e.type_id,attrs:{label:e.type_name,value:e.type_id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"第一步","label-width":"120px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上传图片","label-width":"80px",prop:"add1_img.filename"}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{readonly:"",placeholder:"图片支持jpeg、jpg、png格式，大小5M内"},model:{value:e.form.add1_img.filename,callback:function(t){e.$set(e.form.add1_img,"filename",t)},expression:"form.add1_img.filename"}}),e._v(" "),a("el-upload",{staticClass:"upload-container",attrs:{action:"/api/index.php/files/save","show-file-list":!1,"on-success":e.handleAddImg1Success,"before-upload":e.beforeAvatarUpload,accept:"image/png,image/jpeg,image/jpg",data:e.form.add1_img}},[a("el-button",{attrs:{size:"middle",type:"primary"}},[e._v("选择文件")])],1)],1)]),e._v(" "),a("div",{staticClass:"marT20"},[a("el-form-item",{attrs:{label:"提示文字","label-width":"80px",prop:"add1_tips"}},[a("el-input",{staticClass:"add1TextArea",attrs:{type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"文字限制64个字符内",maxlength:64},model:{value:e.form.add1_tips,callback:function(t){e.$set(e.form,"add1_tips",t)},expression:"form.add1_tips"}})],1)],1),e._v(" "),a("div",{staticClass:"marT20 flex"},[a("el-form-item",{attrs:{label:"按钮文字","label-width":"80px",prop:"add1_button"}},[a("el-input",{attrs:{placeholder:"文字最好控制在8个字内",maxlength:8},model:{value:e.form.add1_button,callback:function(t){e.$set(e.form,"add1_button",t)},expression:"form.add1_button"}})],1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"第二步","label-width":"120px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上传图片","label-width":"80px",prop:"add2_img.filename"}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{readonly:"",placeholder:"图片支持jpeg、jpg、png格式，大小5M内"},model:{value:e.form.add2_img.filename,callback:function(t){e.$set(e.form.add2_img,"filename",t)},expression:"form.add2_img.filename"}}),e._v(" "),a("el-upload",{staticClass:"upload-container",attrs:{action:"/api/index.php/files/save","show-file-list":!1,"on-success":e.handleAddImg2Success,"before-upload":e.beforeAvatarUpload,accept:"image/png,image/jpeg,image/jpg",data:e.form.add2_img}},[a("el-button",{attrs:{size:"middle",type:"primary"}},[e._v("选择文件")])],1)],1)]),e._v(" "),a("div",{staticClass:"marT20"},[a("el-form-item",{attrs:{label:"提示文字","label-width":"80px",prop:"add2_tips"}},[a("el-input",{staticClass:"add1TextArea",attrs:{type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"文字限制64个字符内",maxlength:64},model:{value:e.form.add2_tips,callback:function(t){e.$set(e.form,"add2_tips",t)},expression:"form.add2_tips"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"title"},[e._v("重置方式")]),e._v(" "),a("el-form-item",{attrs:{label:"上传图片","label-width":"120px",prop:"reset_img.filename"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{readonly:"",placeholder:"图片支持jpeg、jpg、png格式，大小5M内"},model:{value:e.form.reset_img.filename,callback:function(t){e.$set(e.form.reset_img,"filename",t)},expression:"form.reset_img.filename"}}),e._v(" "),a("el-upload",{staticClass:"upload-container",attrs:{action:"/api/index.php/files/save","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,accept:"image/png,image/jpeg,image/jpg",data:e.form.reset_img}},[a("el-button",{attrs:{size:"middle",type:"primary"}},[e._v("选择文件")])],1)],1)])],1),e._v(" "),a("el-form-item",{attrs:{label:"提示文字","label-width":"120px",prop:"reset_tips"}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"文字限制64个字符内",maxlength:64},model:{value:e.form.reset_tips,callback:function(t){e.$set(e.form,"reset_tips",t)},expression:"form.reset_tips"}})],1)],1)],1)],1)],1)],1)},s=[],n={render:i,staticRenderFns:s};t.a=n}});
//# sourceMappingURL=17.5e2974bcf8746bc1f3ef.js.map