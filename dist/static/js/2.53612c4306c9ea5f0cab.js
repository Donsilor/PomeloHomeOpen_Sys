webpackJsonp([2],{"4/mA":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("mvHQ"),r=n.n(i),o=n("lHA8"),c=n.n(o),s=n("woOf"),a=n.n(s),l=n("UyAJ"),u={name:"Edite",props:{dialogVisible:{type:Boolean,default:!0},title:{type:String,default:"新增模板"},templateObj:{type:Object,default:function(){return{}}}},data:function(){return{localObj:{},itemList:[{isClick:0,isSave:0,key:1,xIndex:1,yIndex:1,color:""},{isClick:0,isSave:0,key:2,xIndex:2,yIndex:1,color:""},{isClick:0,isSave:0,key:3,xIndex:3,yIndex:1,color:""},{isClick:0,isSave:0,key:4,xIndex:4,yIndex:1,color:""},{isClick:0,isSave:0,key:5,xIndex:1,yIndex:2,color:""},{isClick:0,isSave:0,key:6,xIndex:2,yIndex:2,color:""},{isClick:0,isSave:0,key:7,xIndex:3,yIndex:2,color:""},{isClick:0,isSave:0,key:8,xIndex:4,yIndex:2,color:""},{isClick:0,isSave:0,key:9,xIndex:1,yIndex:3,color:""},{isClick:0,isSave:0,key:10,xIndex:2,yIndex:3,color:""},{isClick:0,isSave:0,key:11,xIndex:3,yIndex:3,color:""},{isClick:0,isSave:0,key:12,xIndex:4,yIndex:3,color:""},{isClick:0,isSave:0,key:13,xIndex:1,yIndex:4,color:""},{isClick:0,isSave:0,key:14,xIndex:2,yIndex:4,color:""},{isClick:0,isSave:0,key:15,xIndex:3,yIndex:4,color:""},{isClick:0,isSave:0,key:16,xIndex:4,yIndex:4,color:""}],ScreenArray:[],ItemArray:[],form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"90px"}},watch:{templateObj:{handler:function(e){var i=this;if(e.template){this.localObj=a()({},e);var t=JSON.parse(e.template);this.ScreenArray=t,"查看模板"===this.title?(this.itemList.forEach(function(e){e.isSave=1}),t.forEach(function(e,n){e[1].forEach(function(t){i.itemList.find(function(e){return e.key===t}).color=i.color(n+1)})})):"编辑模板"===this.title&&(this.itemList.forEach(function(e){e.isSave=1}),t.forEach(function(e,n){e[1].forEach(function(t){i.itemList.find(function(e){return e.key===t}).color=i.color(n+1)})}))}},immediate:!0}},methods:{color:function(e){var t="#3a8ee6";return 1===e?t="#668B8B":2===e?t="#FFDAB9":3===e?t="#23e01e":4===e?t="#b45342":5===e&&(t="#e2ce66"),t},save:function(){if(this.ItemArray.sort(function(e,t){return e.key-t.key}),0!==this.ItemArray.length){var e=this.ItemArray.map(function(e){return e.key}).slice(0),t=this.ItemArray.map(function(e){return e.xIndex}),n=this.ItemArray.map(function(e){return e.yIndex}),i=(new c.a(t),new c.a(n),new c.a(t).size),r=new c.a(n).size;if(e.length===i*r){var o=[[i,r],e];this.ScreenArray.push(o);var s=this.ScreenArray.length,a=this.color(s);this.ItemArray.forEach(function(e){e.isSave=1,e.color=a}),this.ItemArray=[]}else this.$message.error("选择的方块不能组成矩形")}},itemCick:function(e){if(!e.isSave)if(e.isClick=0===e.isClick?1:0,e.isClick)this.ItemArray.push(e);else{var t=this.ItemArray.indexOf(e);this.ItemArray.splice(t,1)}},submit:function(){var t=this;if(this.localObj.name){if(this.itemList.every(function(e){return 1===e.isSave})){var e=1;"修改模板"===this.title&&(e=2),this.ScreenArray.sort(function(e,t){return e[1][0]-t[1][0]});var n=r()(this.ScreenArray),i={operator:e,id:this.localObj.id,template:n,name:this.localObj.name};Object(l.d)(i).then(function(e){t.$message.success("保存成功"),t.$emit("update:dialogVisible",!1),t.$emit("refresh")})}else this.$message.error("置屏幕不完整，请分配完所有的格子")}else this.$message.error("请输入模版名称")},reset:function(){this.ScreenArray=[],this.ItemArray=[],this.itemList=[{isClick:0,isSave:0,key:1,xIndex:1,yIndex:1,color:""},{isClick:0,isSave:0,key:2,xIndex:2,yIndex:1,color:""},{isClick:0,isSave:0,key:3,xIndex:3,yIndex:1,color:""},{isClick:0,isSave:0,key:4,xIndex:4,yIndex:1,color:""},{isClick:0,isSave:0,key:5,xIndex:1,yIndex:2,color:""},{isClick:0,isSave:0,key:6,xIndex:2,yIndex:2,color:""},{isClick:0,isSave:0,key:7,xIndex:3,yIndex:2,color:""},{isClick:0,isSave:0,key:8,xIndex:4,yIndex:2,color:""},{isClick:0,isSave:0,key:9,xIndex:1,yIndex:3,color:""},{isClick:0,isSave:0,key:10,xIndex:2,yIndex:3,color:""},{isClick:0,isSave:0,key:11,xIndex:3,yIndex:3,color:""},{isClick:0,isSave:0,key:12,xIndex:4,yIndex:3,color:""},{isClick:0,isSave:0,key:13,xIndex:1,yIndex:4,color:""},{isClick:0,isSave:0,key:14,xIndex:2,yIndex:4,color:""},{isClick:0,isSave:0,key:15,xIndex:3,yIndex:4,color:""},{isClick:0,isSave:0,key:16,xIndex:4,yIndex:4,color:""}]},close:function(){this.$emit("update:dialogVisible",!1)}}},d={render:function(){var n=this,e=n.$createElement,i=n._self._c||e;return i("el-dialog",{attrs:{visible:n.dialogVisible,title:n.title,center:"",width:"70%"},on:{close:n.close}},[i("div",{staticClass:"title"},[i("span",[n._v("屏幕配置名称：")]),n._v(" "),i("el-input",{attrs:{disabled:"查看模板"===n.title,autocomplete:"off"},model:{value:n.localObj.name,callback:function(e){n.$set(n.localObj,"name",e)},expression:"localObj.name"}})],1),n._v(" "),i("div",{staticClass:"full-screen"},n._l(n.itemList,function(t,e){return i("div",{key:e,staticClass:"screen-item",class:{click:t.isClick,isSave:t.isSave},style:{backgroundColor:t.color},on:{click:function(e){n.itemCick(t)}}},[n._v(n._s(e+1)+"\n    ")])})),n._v(" "),"查看模板"!==n.title?i("div",{staticClass:"button-contaier"},[i("button",{staticClass:"save-btn",on:{click:n.save}},[n._v("保存当前选中\n    ")]),n._v(" "),i("button",{staticClass:"save-btn",on:{click:n.reset}},[n._v("重置\n    ")])]):n._e(),n._v(" "),"查看模板"!==n.title?i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:n.close}},[n._v("取 消")]),n._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:n.submit}},[n._v("提 交\n    ")])],1):n._e()])},staticRenderFns:[]};var f=n("VU/8")(u,d,!1,function(e){n("9WdT")},"data-v-7b908214",null);t.default=f.exports},"4WTo":function(e,t,n){var i=n("NWt+");e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},"7Doy":function(e,t,n){var i=n("EqjI"),r=n("7UMu"),o=n("dSzd")("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},"9Bbf":function(e,t,n){"use strict";var i=n("kM2E");e.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},"9C8M":function(e,t,n){"use strict";function s(e,t){var n,i=A(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n}var a=n("evD5").f,c=n("Yobk"),l=n("xH/j"),u=n("+ZMJ"),d=n("2KxR"),f=n("NWt+"),i=n("vIB/"),r=n("EGZi"),o=n("bRrM"),x=n("+E39"),A=n("06OY").fastKey,v=n("LIJb"),p=x?"_s":"size";e.exports={getConstructor:function(e,o,n,i){var r=e(function(e,t){d(e,r,o,"_i"),e._t=o,e._i=c(null),e._f=void 0,e._l=void 0,e[p]=0,null!=t&&f(t,n,e[i],e)});return l(r.prototype,{clear:function(){for(var e=v(this,o),t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[p]=0},delete:function(e){var t=v(this,o),n=s(t,e);if(n){var i=n.n,r=n.p;delete t._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),t._f==n&&(t._f=i),t._l==n&&(t._l=r),t[p]--}return!!n},forEach:function(e,t){v(this,o);for(var n,i=u(e,1<arguments.length?t:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!s(v(this,o),e)}}),x&&a(r.prototype,"size",{get:function(){return v(this,o)[p]}}),r},def:function(e,t,n){var i,r,o=s(e,t);return o?o.v=n:(e._l=o={i:r=A(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=o),i&&(i.n=o),e[p]++,"F"!==r&&(e._i[r]=o)),e},getEntry:s,setStrong:function(e,n,t){i(e,n,function(e,t){this._t=v(e,n),this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?r(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,r(1))},t?"entries":"values",!t,!0),o(n)}}},"9WdT":function(e,t,n){var i=n("NfCi");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("189af6ed",i,!0)},ALrJ:function(e,t,n){var k=n("+ZMJ"),C=n("MU5D"),m=n("sB3e"),b=n("QRG4"),i=n("oeOm");e.exports=function(d,e){var f=1==d,x=2==d,A=3==d,v=4==d,p=6==d,y=5==d||p,h=e||i;return function(e,t,n){for(var i,r,o=m(e),s=C(o),a=k(t,n,3),c=b(s.length),l=0,u=f?h(e,c):x?h(e,0):void 0;l<c;l++)if((y||l in s)&&(r=a(i=s[l],l,o),d))if(f)u[l]=r;else if(r)switch(d){case 3:return!0;case 5:return i;case 6:return l;case 2:u.push(i)}else if(v)return!1;return p?-1:A||v?v:u}}},BDhv:function(e,t,n){var i=n("kM2E");i(i.P+i.R,"Set",{toJSON:n("m9gC")("Set")})},HpRW:function(e,t,n){"use strict";var i=n("kM2E"),c=n("lOnJ"),l=n("+ZMJ"),u=n("NWt+");e.exports=function(e){i(i.S,e,{from:function(e,t,n){var i,r,o,s,a=t;return c(this),(i=void 0!==a)&&c(a),null==e?new this:(r=[],i?(o=0,s=l(a,n,2),u(e,!1,function(e){r.push(s(e,o++))})):u(e,!1,r.push,r),new this(r))}})}},LIJb:function(e,t,n){var i=n("EqjI");e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},NfCi:function(e,t,n){(e.exports=n("FZ+f")(!0)).push([e.i,".el-input[data-v-7b908214]{width:300px}.full-screen[data-v-7b908214]{width:410px;height:410px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:10px auto}.title[data-v-7b908214]{width:50%;margin:15px auto}.el-button[data-v-7b908214]{margin-right:15px;font-size:16px}.screen-item[data-v-7b908214]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100px;height:100px;text-align:center;line-height:100px;border:1px solid #add8e6}.button-contaier[data-v-7b908214]{width:250px;margin:10px auto}.click[data-v-7b908214]{background:#cbcbcb}.isSave[data-v-7b908214]{background:gray}.save-btn[data-v-7b908214]{margin:20px}","",{version:3,sources:["/Users/eric/PomeloHomeOpen_Sys/src/views/ScreenManageMent/edite.vue"],names:[],mappings:"AACA,2BACG,WAAa,CACf,AACD,8BACG,YAAa,AACb,aAAc,AACd,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,8BAA+B,AAC/B,6BAA8B,AAC1B,uBAAwB,AACpB,mBAAoB,AAC5B,mBAAoB,AAChB,eAAgB,AACpB,gBAAkB,CACpB,AACD,wBACG,UAAW,AACX,gBAAkB,CACpB,AACD,4BACG,kBAAmB,AACnB,cAAgB,CAClB,AACD,8BACG,yBAAyB,AACtB,sBAAsB,AACrB,qBAAqB,AACjB,iBAAiB,AACzB,YAAa,AACb,aAAc,AACd,kBAAmB,AACnB,kBAAmB,AACnB,wBAA4B,CAC9B,AACD,kCACE,YAAa,AACb,gBAAkB,CACnB,AACD,wBACG,kBAAoB,CACtB,AACD,yBACG,eAAiB,CACnB,AACD,2BACG,WAAa,CACf",file:"edite.vue",sourcesContent:["\n.el-input[data-v-7b908214]{\n   width: 300px;\n}\n.full-screen[data-v-7b908214] {\n   width: 410px;\n   height: 410px;\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-orient: horizontal;\n   -webkit-box-direction: normal;\n       -ms-flex-direction: row;\n           flex-direction: row;\n   -ms-flex-wrap: wrap;\n       flex-wrap: wrap;\n   margin: 10px auto;\n}\n.title[data-v-7b908214]{\n   width:50% ;\n   margin: 15px auto;\n}\n.el-button[data-v-7b908214]{\n   margin-right: 15px;\n   font-size: 16px;\n}\n.screen-item[data-v-7b908214] {\n   -webkit-user-select:none;\n      -moz-user-select:none;\n       -ms-user-select:none;\n           user-select:none;\n   width: 100px;\n   height: 100px;\n   text-align: center;\n   line-height: 100px;\n   border: 1px solid lightblue;\n}\n.button-contaier[data-v-7b908214]{\n  width: 250px;\n  margin: 10px auto;\n}\n.click[data-v-7b908214] {\n   background: #cbcbcb;\n}\n.isSave[data-v-7b908214] {\n   background: gray;\n}\n.save-btn[data-v-7b908214] {\n   margin: 20px;\n}\n"],sourceRoot:""}])},UyAJ:function(e,t,n){"use strict";t.c=function(e){return Object(i.a)({url:"/api/ext/devcard/template",method:"get",data:e})},t.d=function(e){return Object(i.a)({url:"/api/ext/devcard/template",method:"post",data:e})},t.b=function(){return Object(i.a)({url:"/api/ext/devcard/size",method:"get"})},t.a=function(e){return Object(i.a)({url:"/api/ext/devcard/size",method:"post",data:e})};var i=n("Vo7i")},ioQ5:function(e,t,n){n("HpRW")("Set")},lHA8:function(e,t,n){e.exports={default:n("pPW7"),__esModule:!0}},m9gC:function(e,t,n){var i=n("RY/4"),r=n("4WTo");e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},oNmr:function(e,t,n){n("9Bbf")("Set")},oeOm:function(e,t,n){var i=n("7Doy");e.exports=function(e,t){return new(i(e))(t)}},pPW7:function(e,t,n){n("M6a0"),n("zQR9"),n("+tPU"),n("ttyz"),n("BDhv"),n("oNmr"),n("ioQ5"),e.exports=n("FeBl").Set},qo66:function(e,t,n){"use strict";var d=n("7KvD"),f=n("kM2E"),x=n("06OY"),A=n("S82l"),v=n("hJx8"),p=n("xH/j"),y=n("NWt+"),h=n("2KxR"),k=n("EqjI"),C=n("e6n0"),m=n("evD5").f,b=n("ALrJ")(0),I=n("+E39");e.exports=function(n,e,t,i,r,o){var s=d[n],a=s,c=r?"set":"add",l=a&&a.prototype,u={};return I&&"function"==typeof a&&(o||l.forEach&&!A(function(){(new a).entries().next()}))?(a=e(function(e,t){h(e,a,n,"_c"),e._c=new s,null!=t&&y(t,r,e[c],e)}),b("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(i){var r="add"==i||"set"==i;i in l&&(!o||"clear"!=i)&&v(a.prototype,i,function(e,t){if(h(this,a,i),!r&&o&&!k(e))return"get"==i&&void 0;var n=this._c[i](0===e?0:e,t);return r?this:n})}),o||m(a.prototype,"size",{get:function(){return this._c.size}})):(a=i.getConstructor(e,n,r,c),p(a.prototype,t),x.NEED=!0),C(a,n),u[n]=a,f(f.G+f.W+f.F,u),o||i.setStrong(a,n,r),a}},ttyz:function(e,t,n){"use strict";var i=n("9C8M"),r=n("LIJb");e.exports=n("qo66")("Set",function(t){return function(e){return t(this,0<arguments.length?e:void 0)}},{add:function(e){return i.def(r(this,"Set"),e=0===e?0:e,e)}},i)}});