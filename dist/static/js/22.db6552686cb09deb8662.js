webpackJsonp([22],{"7oIp":function(e,t){throw new Error("Module build failed: Error: Missing binding /Users/eric/PomeloHomeOpen_Sys/node_modules/node-sass/vendor/darwin-x64-57/binding.node\nNode Sass could not find a binding for your current environment: OS X 64-bit with Node.js 8.x\n\nFound bindings for the following environments:\n  - OS X 64-bit with Node.js 10.x\n\nThis usually happens because your environment has changed since running `npm install`.\nRun `npm rebuild node-sass` to download the binding for your current environment.\n    at module.exports (/Users/eric/PomeloHomeOpen_Sys/node_modules/node-sass/lib/binding.js:15:13)\n    at Object.<anonymous> (/Users/eric/PomeloHomeOpen_Sys/node_modules/node-sass/lib/index.js:14:35)\n    at Module._compile (module.js:653:30)\n    at Object.Module._extensions..js (module.js:664:10)\n    at Module.load (module.js:566:32)\n    at tryModuleLoad (module.js:506:12)\n    at Function.Module._load (module.js:498:3)\n    at Module.require (module.js:597:17)\n    at require (internal/module.js:11:18)\n    at Object.<anonymous> (/Users/eric/PomeloHomeOpen_Sys/node_modules/sass-loader/lib/loader.js:3:14)\n    at Module._compile (module.js:653:30)\n    at Object.Module._extensions..js (module.js:664:10)\n    at Module.load (module.js:566:32)\n    at tryModuleLoad (module.js:506:12)\n    at Function.Module._load (module.js:498:3)\n    at Module.require (module.js:597:17)")},E4LH:function(e,t,o){"use strict";t.a=function(e){return/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/g.test(e)},t.c=function(e,t,o){var s=!0;if(!t)return void o();for(var n=0;n<t.length;n++){var a=t.charCodeAt(n);if(!(65<=a&&a<=90||97<=a&&a<=122||95==a)){s=!1,o("只能是字母下划线");break}}s&&o()},t.b=function(e,t,o){var s=!0;if(!t)return void o();for(var n=0;n<t.length;n++){var a=t.charAt(n);if(!/[\u4e00-\u9fa5a-zA-Z]+/g.test(a)){s=!1,o("只能是中文字母");break}}s&&o()}},UNhK:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("woOf"),n=o.n(s),a=(o("zL8q"),o("Vo7i")),i=(o("VSB1"),o("TIfe")),r=o("E4LH"),l={name:"addVoicePlatform",computed:{},created:function(){this.isEdit&&this.getVoiceInfo()},mounted:function(){},data:function(){return{isEdit:!!this.$route.query.id,token:Object(i.b)(),isLoadData:!1,editText:"编辑语音平台信息",disabled:!!this.$route.query.id,id:this.$route.query.id?this.$route.query.id:"",form:{voice_id:this.$route.query.id,name:"",desc:"",logo:{id:"",type:29,object:"",filename:"",url:"",md5:""}},rules:{name:[{required:!0,message:"请输入语音平台中文",trigger:"blur"},{validator:r.b}],desc:[{required:!0,message:"请输入语音平台描述",trigger:"blur"}]},logo:{token:Object(i.b)(),type:29}}},methods:{getVoiceInfo:function(){var t=this;Object(a.a)({url:"/admin/voice/info",method:"get",data:{voice_id:this.$route.query.id}}).then(function(e){t.form.name=e.name,t.form.desc=e.desc,t.form.logo=e.logo})},handleLogoSuccess:function(e){if(200===e.code){var t=n()({id:this.form.logo.id},e.result);t.url=t.file_url,this.form.logo=t}else this.$message.error(e.msg)},beforeLogoUpload:function(e){var t="image/png"===e.type,o=e.size/1024/1024<5;return t||this.$message.error("请上传5M大小内PNG格式的logo"),o||this.$message.error("请上传5M大小内PNG格式的logo"),t&&o},editVoice:function(){var t=this;if(this.disabled)return this.editText="确认并提交修改",this.disabled=!1;this.$refs.ruleForm.validate(function(e){if(e){if(""==t.form.logo.url)return void t.$message.error("请上传语音平台logo！");t.$confirm("是否确认保存修改后语音平台信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.a)({url:"/admin/voice/edit",method:"post",data:t.form}).then(function(e){t.disabled=!0,t.editText="编辑语音平台信息",t.$message({type:"success",message:"保存成功!"})}).catch(function(e){t.$message({type:"error",message:e.msg})})})}})},addVoice:function(){var t=this;this.$refs.ruleForm.validate(function(e){if(e){if(""==t.form.logo.url)return void t.$message.error("请上传语音平台logo");t.$confirm("是否确定添加该语音平台？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.a)({url:"/admin/voice/add",method:"post",data:t.form}).then(function(e){t.$message({type:"success",message:"保存成功!"}),setTimeout(function(){t.$router.push({path:"/typeManagement/voicePlatform"})},2e3)}).catch(function(e){t.$message({type:"error",message:e.msg})})})}})},handleBackEvent:function(){this.$router.push({path:"/typeManagement/voicePlatform"})}},components:{}},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container calendar-list-container addCategoryPage"},[o("el-row",{attrs:{gutter:30}},[o("el-col",{attrs:{span:24}},[o("el-button",{attrs:{type:"ghost"},on:{click:t.handleBackEvent}},[t._v("返回")]),t._v(" "),t.isEdit?t._e():o("el-button",{attrs:{type:"primary"},on:{click:t.addVoice}},[t._v("确定并添加该语音平台")]),t._v(" "),t.isEdit?o("el-button",{attrs:{type:"primary"},on:{click:t.editVoice}},[t._v(t._s(t.editText))]):t._e()],1),t._v(" "),o("el-col",{staticStyle:{margin:"20px 0px","padding-bottom":"40px"},attrs:{span:24}},[o("div",{staticClass:"desTitleTop"},[t._v("基本信息")]),t._v(" "),o("el-col",{attrs:{span:24}},[o("el-form",{ref:"ruleForm",staticStyle:{"margin-top":"20px"},attrs:{rules:t.rules,model:t.form,"label-width":"80px",size:"large"}},[o("el-form-item",{attrs:{label:"语音平台中文","label-width":"120px",prop:"name"}},[o("el-col",{attrs:{span:12}},[o("el-input",{attrs:{maxlength:32,span:6,disabled:t.disabled,placeholder:" 中文名限中文、字母、32个字符、区分大小写"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"语音平台描述","label-width":"120px",prop:"desc"}},[o("el-col",{attrs:{span:12}},[o("el-input",{attrs:{type:"textarea",rows:6,disabled:t.disabled,span:6,placeholder:" 请输入语音平台描述"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1)],1),t._v(" "),o("el-form-item",{staticStyle:{"padding-bottom":"30px"},attrs:{label:"语音平台logo","label-width":"120px"}},[o("el-col",{attrs:{span:12}},[o("p",{staticClass:"ttips"},[t._v("图标要求格式png，logo以外区域透明，大小5M以内")]),t._v(" "),o("div",{staticClass:"fileuploadItem channel"},[o("el-upload",{staticClass:"avatar-uploader",class:t.disabled?"disabled":"",attrs:{action:"/api/index.php/files/save","show-file-list":!1,"on-success":t.handleLogoSuccess,"before-upload":t.beforeLogoUpload,accept:"image/png",disabled:t.disabled,data:t.logo}},[""!=t.form.logo.url?o("img",{staticClass:"avatar",attrs:{src:t.form.logo.url}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var u=o("VU/8")(l,d,!1,function(e){o("gTQu")},null,null);t.default=u.exports},gTQu:function(e,t,o){var s=o("7oIp");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);o("rjj0")("39df89c6",s,!0)}});