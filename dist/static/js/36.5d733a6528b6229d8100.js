webpackJsonp([36],{"0WGh":function(e,t,s){t=e.exports=s("FZ+f")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"firmwareToAudit.vue",sourceRoot:""}])},I3i4:function(e,t,s){"use strict";var a=s("woOf"),i=s.n(a),n=s("sQkU"),o=s("zL8q");s.n(o);t.a={name:"goLiveToAudit",data:function(){return{version_info:{action_type:0,description:"版本信息",unapproved_reason:""},record_id:"",checkDetail:{},business_name:"",action_type:1,approved_reason:"审核通过"}},computed:{unapproved_list:function(){var e=[];return 0==this.version_info.action_type&&e.push(i()({},this.version_info)),this.checkDetail.file_list&&this.checkDetail.file_list.forEach(function(t){0==t.action_type&&e.push(i()({},t))}),this.checkDetail.release_file_list&&this.checkDetail.release_file_list.forEach(function(t){0==t.action_type&&e.push(i()({},t))}),e},reject_reason_list:function(){var e=[];return 2==this.version_info.action_type&&e.push(i()({},this.version_info)),this.checkDetail.file_list&&this.checkDetail.file_list.forEach(function(t){2==t.action_type&&e.push(i()({},t))}),this.checkDetail.release_file_list&&this.checkDetail.release_file_list.forEach(function(t){2==t.action_type&&e.push(i()({},t))}),e}},created:function(){this.record_id=this.$route.query.record_id,this.business_name=this.$route.query.business_name,this.type=this.$route.query.type||"detail",this.status=this.$route.query.status||"0"},mounted:function(){this.$store.dispatch("GetAuditMenus"),this.getReviewInfo()},methods:{getReviewInfo:function(){var e=this,t=this,s={record_id:t.record_id};Object(n.e)(s).then(function(s){e.checkDetail=s,t.checkDetail.file_list.length>0&&t.checkDetail.file_list.forEach(function(e){t.$set(e,"action_type",0),t.$set(e,"unapproved_reason",""),t.$set(e,"description",e.type_txt)}),t.checkDetail.release_file_list.length>0&&t.checkDetail.release_file_list.forEach(function(e){t.$set(e,"action_type",0),t.$set(e,"unapproved_reason",""),t.$set(e,"description",e.type_txt)})})},imgPreview:function(e){fancyBox(e.target,this.checkDetail.licenses)},commitCheck:function(){var e=this;if(this.action_type=1,this.unapproved_list.length>0)return!1;this.reject_reason_list.length>0&&(this.action_type=2);var t=this.reject_reason_list.map(function(e){return e.description+"未审核通过"+(e.unapproved_reason?"——"+e.unapproved_reason:"")}),s={record_id:this.record_id,action_type:this.action_type,approved_reason:t.join("|")};this.$confirm("确认提交？").then(function(){Object(n.a)(s).then(function(t){t.res&&(Object(o.Message)({message:"审核成功",type:"success",duration:2e3}),e.$router.go(-1))})})},cancelCheck:function(){var e=this;this.$confirm("确认取消？").then(function(){e.$router.go(-1)})}},deactivated:function(){this.$destroy()}}},Pzur:function(e,t,s){"use strict";function a(e){s("peSG")}Object.defineProperty(t,"__esModule",{value:!0});var i=s("I3i4"),n=s("ybVS"),o=s("VU/8"),r=a,c=o(i.a,n.a,!1,r,null,null);t.default=c.exports},peSG:function(e,t,s){var a=s("0WGh");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("2b24530e",a,!0)},sQkU:function(e,t,s){"use strict";function a(e){return Object(_.a)({url:"/admin/review_lists?page="+e.page,method:"post",data:e})}function i(){return Object(_.a)({url:"/admin/product/type_lists",method:"post",data:{}})}function n(e){return Object(_.a)({url:"/admin/review_info",method:"post",data:e})}function o(e){return Object(_.a)({url:"/admin/review_approve",method:"post",data:e})}function r(e){return Object(_.a)({url:"/admin/product_lists",method:"post",data:e})}function c(e){return Object(_.a)({url:"/admin/product_info",method:"post",data:e})}function l(e){return Object(_.a)({url:"/admin/product_unshelve",method:"post",data:e})}t.f=a,t.d=i,t.e=n,t.a=o,t.c=r,t.b=c,t.g=l;var _=s("Vo7i")},ybVS:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.$router.go(-1)}}},[s("i",{staticClass:"el-icon-arrow-left"}),e._v(" 返回\n    ")]),e._v(" "),s("h3",[e._v(e._s(e.business_name))]),e._v(" "),"detail"==e.type?s("el-card",{staticClass:"box-card"},[1==e.status?s("div",{staticStyle:{color:"#67C23A","font-size":"24px"}},[e._v("\n            审核通过 "),s("i",{staticClass:"el-icon-circle-check"})]):e._e(),e._v(" "),2==e.status?s("div",[s("p",{staticStyle:{color:"#F56C6C","font-weight":"bold"}},[e._v("审核不通过")]),e._v(" "),e._l(e.checkDetail.approved_reason,function(t,a){return s("p",{key:a},[e._v(e._s(a+1)+"、"+e._s(t))])})],2):e._e()]):e._e(),e._v(" "),s("el-card",{staticClass:"box-card golive-box"},[s("el-row",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[s("i"),e._v(e._s(e.checkDetail.version_no)+"版本信息\n        ")]),e._v(" "),s("el-row",{staticClass:"card-body"},[s("el-row",{staticClass:"card-row"},[s("el-col",{staticClass:"card-span-left",attrs:{span:3}},[e._v("版本号")]),e._v(" "),s("el-col",{staticClass:"card-span-right",attrs:{span:16,offset:1}},[e._v(e._s(e.checkDetail.version_no))])],1),e._v(" "),s("el-row",{staticClass:"card-row"},[s("el-col",{staticClass:"card-span-left",attrs:{span:3}},[e._v("版本说明")]),e._v(" "),s("el-col",{staticClass:"card-span-right",attrs:{span:16,offset:1}},[e._v("\n                    "+e._s(e.checkDetail.des)+"\n                ")])],1),e._v(" "),"audit"==e.type?s("el-row",{staticClass:"card-handle-else"},[s("el-col",{attrs:{span:6,offset:4}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.version_info.action_type=1}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:1==e.version_info.action_type,expression:"version_info.action_type==1"}],staticClass:"el-icon-check"}),e._v("\n                        审核通过\n                    ")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.version_info.action_type=2}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:2==e.version_info.action_type,expression:"version_info.action_type==2"}],staticClass:"el-icon-check"}),e._v("\n                        审核不通过\n                    ")])],1),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:0!=e.version_info.action_type,expression:"version_info.action_type!=0"}],staticClass:"check-reason",attrs:{span:14}},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"audit-result-label"},[e._v("审核结果：")])]),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:2==e.version_info.action_type,expression:"version_info.action_type == 2"}],attrs:{type:"textarea",autosize:"",maxlength:500,placeholder:"审核未通过理由"},model:{value:e.version_info.unapproved_reason,callback:function(t){e.$set(e.version_info,"unapproved_reason",t)},expression:"version_info.unapproved_reason"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.version_info.action_type,expression:"version_info.action_type == 1"}],staticClass:"audit-result-pass"},[s("i",{staticClass:"el-icon-circle-check"}),e._v(" 审核通过\n                            ")])],1)],1)],1)],1):e._e(),e._v(" "),e._l(e.checkDetail.file_list,function(t,a){return[s("el-row",{staticClass:"card-row"},[s("el-col",{staticClass:"card-span-left",attrs:{span:3}},[e._v(e._s(t.type_txt))]),e._v(" "),s("el-col",{staticClass:"card-span-right",attrs:{span:16,offset:1}},[s("a",{attrs:{href:t.file_url,target:"_blank",download:""}},[s("svg-icon",{attrs:{"icon-class":"zip"}}),e._v("\n                            "+e._s(t.filename)+"\n                        ")],1),e._v(" "),s("span",{staticClass:"dark-gray"},[e._v(e._s(t.size))])])],1),e._v(" "),"audit"==e.type?s("el-row",{staticClass:"card-handle-else"},[s("el-col",{attrs:{span:6,offset:4}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.action_type=1}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:1==t.action_type,expression:"item.action_type==1"}],staticClass:"el-icon-check"}),e._v("\n                            审核通过\n                        ")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.action_type=2}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:2==t.action_type,expression:"item.action_type==2"}],staticClass:"el-icon-check"}),e._v("\n                            审核不通过\n                        ")])],1),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:0!==t.action_type,expression:"item.action_type !== 0"}],staticClass:"check-reason",attrs:{span:14}},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"audit-result-label"},[e._v("审核结果：")])]),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:2==t.action_type,expression:"item.action_type == 2"}],attrs:{type:"textarea",autosize:"",maxlength:500,placeholder:"审核未通过理由"},model:{value:t.unapproved_reason,callback:function(s){e.$set(t,"unapproved_reason",s)},expression:"item.unapproved_reason"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.action_type,expression:"item.action_type == 1"}],staticClass:"audit-result-pass"},[s("i",{staticClass:"el-icon-circle-check"}),e._v(" 审核通过\n                                ")])],1)],1)],1)],1):e._e()]})],2)],1),e._v(" "),s("el-card",{staticClass:"box-card golive-box"},[s("el-row",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[s("i"),e._v("上线资料\n        ")]),e._v(" "),s("el-row",{staticClass:"card-body"},[e._l(e.checkDetail.release_file_list,function(t){return[s("el-row",{staticClass:"card-row"},[s("el-col",{staticClass:"card-span-left",attrs:{span:3}},[e._v(e._s(t.type_txt))]),e._v(" "),s("el-col",{staticClass:"card-span-right",attrs:{span:16,offset:1}},[s("a",{attrs:{href:t.file_url,target:"_blank",download:""}},[s("svg-icon",{attrs:{"icon-class":"zip"}}),e._v("\n                            "+e._s(t.filename)+"\n                        ")],1),e._v(" "),s("span",{staticClass:"dark-gray"},[e._v(e._s(t.size))])])],1),e._v(" "),"audit"==e.type?s("el-row",{staticClass:"card-handle-else"},[s("el-col",{attrs:{span:6,offset:4}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.action_type=1}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:1==t.action_type,expression:"item.action_type==1"}],staticClass:"el-icon-check"}),e._v("\n                            审核通过\n                        ")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.action_type=2}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:2==t.action_type,expression:"item.action_type==2"}],staticClass:"el-icon-check"}),e._v("\n                            审核不通过\n                        ")])],1),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:0!==t.action_type,expression:"item.action_type !== 0"}],staticClass:"check-reason",attrs:{span:14}},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"audit-result-label"},[e._v("审核结果：")])]),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:2==t.action_type,expression:"item.action_type == 2"}],attrs:{type:"textarea",autosize:"",maxlength:500,placeholder:"审核未通过理由"},model:{value:t.unapproved_reason,callback:function(s){e.$set(t,"unapproved_reason",s)},expression:"item.unapproved_reason"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.action_type,expression:"item.action_type == 1"}],staticClass:"audit-result-pass"},[s("i",{staticClass:"el-icon-circle-check"}),e._v(" 审核通过\n                                ")])],1)],1)],1)],1):e._e()]})],2)],1),e._v(" "),"audit"==e.type?s("el-card",{staticClass:"box-card audit-box",staticStyle:{"margin-top":"30px"}},[s("el-row",[s("el-col",{attrs:{offset:4}},[e.unapproved_list.length?s("p",{staticStyle:{color:"#E6A23C"}},[e._v("未审核：")]):e._e()])],1),e._v(" "),e._l(e.unapproved_list,function(t,a){return s("el-row",{key:a},[s("el-col",{attrs:{offset:4}},[s("p",[e._v(e._s(a+1)+"、"+e._s(t.prefix)+e._s(t.description)+"还未审核；")])])],1)}),e._v(" "),s("el-row",[s("el-col",{attrs:{offset:4}},[e.reject_reason_list.length?s("p",{staticStyle:{color:"#F56C6C"}},[e._v("审核不通过：")]):e._e()])],1),e._v(" "),e._l(e.reject_reason_list,function(t,a){return s("el-row",{key:a},[s("el-col",{attrs:{offset:4}},[s("p",[e._v(e._s(a+1)+"、"+e._s(t.prefix)+e._s(t.description)+"未审核通过——"+e._s(t.unapproved_reason)+"；")])])],1)}),e._v(" "),s("el-row",{staticStyle:{"padding-top":"15px"}},[s("el-col",{attrs:{span:3,offset:4}},[s("el-button",{attrs:{disabled:e.unapproved_list.length>0||e.reject_reason_list>0,type:"primary"},on:{click:e.commitCheck}},[e._v("提交\n                ")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("el-button",{on:{click:e.cancelCheck}},[e._v("取消")])],1)],1)],2):e._e()],1)},i=[],n={render:a,staticRenderFns:i};t.a=n}});
//# sourceMappingURL=36.5d733a6528b6229d8100.js.map