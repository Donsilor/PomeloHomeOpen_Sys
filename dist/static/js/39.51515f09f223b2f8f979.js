webpackJsonp([39],{"2YLH":function(e,t,l){var a=l("hGun");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);l("rjj0")("41df4655",a,!0)},RZY1:function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"attDialog"},[l("el-dialog",{attrs:{"before-close":e.closeDialog,top:e.top,center:!0,width:"1000px",title:e.dialogTitle,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[l("el-form",{ref:"attForm",attrs:{inline:!0,rules:e.rules,model:e.form,"label-position":"left","label-width":"140px"}},[l("el-row",[l("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:2}},[e._v("\n                    属性信息\n                ")]),e._v(" "),l("el-col",{attrs:{span:22}},[l("el-form-item",{staticClass:"w100p",attrs:{label:"属性名称(node_ID)",prop:"nodeid"}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"仅支持字母、下划线输入，最多32个字符"},model:{value:e.form.nodeid,callback:function(t){e.$set(e.form,"nodeid",t)},expression:"form.nodeid"}})],1),e._v(" "),l("el-form-item",{staticClass:"w100p pl8",attrs:{label:"  是否为必选"}},[l("el-radio-group",{model:{value:e.form.is_default,callback:function(t){e.$set(e.form,"is_default",t)},expression:"form.is_default"}},[l("el-radio",{attrs:{label:1}},[e._v("必选")]),e._v(" "),l("el-radio",{attrs:{label:0}},[e._v("非必选")])],1)],1)],1)],1),e._v(" "),e._l(e.form.value_list,function(t,a){return l("el-row",{key:a,staticClass:"first-item"},[l("div",[l("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:2}},[e._v("\n                        参数信息\n                    ")]),e._v(" "),l("el-col",{attrs:{span:22}},[l("el-form-item",{attrs:{label:"参数名称(key)",prop:"value_list."+a+".key",rules:[{required:!0,message:"参数名称不能为空"},{min:1,max:32,message:"参数名称最多32个字符"},{validator:e.letterAndUnderscode}]}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"仅支持字母、下划线输入，最多32个字符"},model:{value:t.key,callback:function(l){e.$set(t,"key",l)},expression:"paramKey.key"}})],1),e._v(" "),l("el-form-item",{attrs:{inline:!0,label:"参数含义","label-width":"100px",prop:"value_list."+a+".remark",rules:[{required:!0,message:"参数含义不能为空"}]}},[l("el-input",{staticClass:"input-width",model:{value:t.remark,callback:function(l){e.$set(t,"remark",l)},expression:"paramKey.remark"}})],1),e._v(" "),l("el-form-item",{staticClass:"w50p pl8",attrs:{label:"单位",prop:"value_list."+a+".unit",rules:[{validator:e.lengthLimit.bind(null,16)}]}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"支持中英文、特殊字符，最多16个字符"},model:{value:t.unit,callback:function(l){e.$set(t,"unit",l)},expression:"paramKey.unit"}})],1),e._v(" "),l("el-form-item",{staticClass:"w100p",attrs:{label:"参数可控",prop:"value_list."+a+".method",rules:[{required:!0,message:"参数可控不能为空"}]}},[l("el-checkbox-group",{model:{value:t.method,callback:function(l){e.$set(t,"method",l)},expression:"paramKey.method"}},[l("el-checkbox",{attrs:{label:"set"}},[e._v("set")]),e._v(" "),l("el-checkbox",{attrs:{label:"get"}},[e._v("get")]),e._v(" "),l("el-checkbox",{attrs:{label:"report"}},[e._v("report")]),e._v(" "),l("el-checkbox",{attrs:{label:"alarm"}},[e._v("alarm")])],1)],1),e._v(" "),l("el-form-item",{staticClass:"w100p pl8",attrs:{label:"参数值类型"}},[l("el-radio-group",{on:{change:function(l){e.changeTypeValue(l,t)}},model:{value:t.type,callback:function(l){e.$set(t,"type",l)},expression:"paramKey.type"}},[l("el-radio",{attrs:{label:"string"}},[e._v("string")]),e._v(" "),l("el-radio",{attrs:{label:"int"}},[e._v("int")]),e._v(" "),l("el-radio",{attrs:{label:"object"}},[e._v("object")]),e._v(" "),l("el-radio",{attrs:{label:"float"}},[e._v("float")]),e._v(" "),l("el-radio",{attrs:{label:"array"}},[e._v("array")]),e._v(" "),l("el-radio",{attrs:{label:"bool"}},[e._v("bool")])],1)],1),e._v(" "),1==t.key_type?[l("el-form-item",{staticClass:"w100p mt0 pl8",attrs:{label:"枚举参数值"}},[l("el-form-item",{attrs:{label:"数据说明","label-width":"290px"}}),e._v(" "),l("el-form-item",{attrs:{label:"传送数据","label-width":"290px"}}),e._v(" "),l("el-form-item",{attrs:{label:"操作","label-width":"85px"}})],1),e._v(" "),e._l(t.value_list,function(i,s){return l("el-form-item",{key:s,staticClass:"w100p mt0",attrs:{label:" "}},[l("el-form-item",{attrs:{label:"",prop:"value_list."+a+".value_list."+s+".value_des",rules:[{validator:e.lengthLimit.bind(null,64)}]}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"最多64个字符"},model:{value:i.value_des,callback:function(t){e.$set(i,"value_des",t)},expression:"valueItem.value_des"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"",prop:"value_list."+a+".value_list."+s+".value",rules:[{validator:e.lengthLimit.bind(null,32)},{validator:e.unCN}]}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"字母数字符号，最多32个字符"},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"valueItem.value"}})],1),e._v(" "),s>0?l("el-form-item",{staticStyle:{"padding-left":"25px"},attrs:{label:""}},[l("i",{staticClass:"el-icon-delete",on:{click:function(l){e.delEnumerateItem(s,t)}}})]):e._e()],1)}),e._v(" "),l("el-form-item",{staticClass:"w100p",attrs:{label:" "},scopedSlots:e._u([{key:"default",fn:function(a){return[l("a",{staticClass:"addbtn",attrs:{href:"javascript:void(0);"},on:{click:function(l){e.addEnumerateItem(t)}}},[l("i",{staticClass:"el-icon-plus"}),e._v(" 添加更多参数值\n                                    ")])]}}])})]:e._e(),e._v(" "),2==t.key_type?l("div",[l("el-form-item",{staticClass:"w100p mt0 pl8",attrs:{label:"参数范围值"}},[t.value_list[1]?l("el-form-item",{attrs:{label:"",prop:"value_list."+a+".value_list.1.value",rules:[{required:!0,message:"最小值不能为空"},{type:"number",message:"最小值为数字"}]}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入数据最小值"},model:{value:t.value_list[1].value,callback:function(l){e.$set(t.value_list[1],"value",e._n(l))},expression:"paramKey.value_list[1].value"}})],1):e._e(),e._v(" "),t.value_list[2]?l("el-form-item",{attrs:{label:"",prop:"value_list."+a+".value_list.2.value",rules:[{required:!0,message:"最大值不能为空"},{type:"number",message:"最大值为数字"}]}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入数据最大值"},model:{value:t.value_list[2].value,callback:function(l){e.$set(t.value_list[2],"value",e._n(l))},expression:"paramKey.value_list[2].value"}})],1):e._e()],1)],1):e._e(),e._v(" "),3==t.key_type?[e._l(t.list,function(i,s){return l("div",{staticClass:"sec-item"},[l("el-form-item",{attrs:{label:"参数名称(key)",prop:"value_list."+a+".list."+s+".key",rules:[{required:!0,message:"参数名称不能为空"},{min:1,max:32,message:"参数名称最多32个字符"},{validator:e.letterAndUnderscode}]}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"仅支持字母、下划线输入，最多32个字符"},model:{value:i.key,callback:function(t){e.$set(i,"key",t)},expression:"em.key"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"参数含义","label-width":"100px",prop:"value_list."+a+".list."+s+".remark",rules:[{required:!0,message:"参数含义不能为空"}]}},[l("el-input",{staticClass:"input-width",model:{value:i.remark,callback:function(t){e.$set(i,"remark",t)},expression:"em.remark"}})],1),e._v(" "),l("el-form-item",{staticClass:"pl8",attrs:{label:"单位",prop:"value_list."+a+".list."+s+".unit",rules:[{validator:e.lengthLimit.bind(null,16)}]}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"支持中英文、特殊字符，最多16个字符"},model:{value:i.unit,callback:function(t){e.$set(i,"unit",t)},expression:"em.unit"}})],1),e._v(" "),l("el-form-item",{staticClass:"w100p",attrs:{label:"参数可控",prop:"value_list."+a+".list."+s+".method",rules:[{required:!0,message:"参数可控不能为空"}]}},[l("el-checkbox-group",{model:{value:i.method,callback:function(t){e.$set(i,"method",t)},expression:"em.method"}},[l("el-checkbox",{attrs:{label:"set"}},[e._v("set")]),e._v(" "),l("el-checkbox",{attrs:{label:"get"}},[e._v("get")]),e._v(" "),l("el-checkbox",{attrs:{label:"report"}},[e._v("report")]),e._v(" "),l("el-checkbox",{attrs:{label:"alarm"}},[e._v("alarm")])],1)],1),e._v(" "),l("el-form-item",{staticClass:"w100p pl8",attrs:{label:"参数值类型"}},[l("el-radio-group",{on:{change:function(t){e.changeTypeValue(t,i)}},model:{value:i.type,callback:function(t){e.$set(i,"type",t)},expression:"em.type"}},[l("el-radio",{attrs:{label:"string"}},[e._v("string")]),e._v(" "),l("el-radio",{attrs:{label:"int"}},[e._v("int")]),e._v(" "),l("el-radio",{attrs:{label:"float"}},[e._v("float")]),e._v(" "),l("el-radio",{attrs:{label:"array"}},[e._v("array")]),e._v(" "),l("el-radio",{attrs:{label:"bool"}},[e._v("bool")])],1)],1),e._v(" "),1==i.key_type?[l("el-form-item",{staticClass:"w100p mt0 pl8",attrs:{label:"枚举参数值"}},[l("el-form-item",{attrs:{label:"参数名称(key)","label-width":"290px"}}),e._v(" "),l("el-form-item",{attrs:{label:"传送数据","label-width":"290px"}}),e._v(" "),l("el-form-item",{attrs:{label:"操作","label-width":"60px"}})],1),e._v(" "),e._l(i.value_list,function(t,r){return l("el-form-item",{staticClass:"w100p mt0",attrs:{label:" "}},[l("el-form-item",{attrs:{label:"",prop:"value_list."+a+".list."+s+".value_list."+r+".value_des",rules:[{validator:e.lengthLimit.bind(null,64)}]}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"最多64个字符"},model:{value:t.value_des,callback:function(l){e.$set(t,"value_des",l)},expression:"vi.value_des"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"",prop:"value_list."+a+".list."+s+".value_list."+r+".value",rules:[{validator:e.lengthLimit.bind(null,32)},{validator:e.unCN}]}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"字母数字符号，最多32个字符"},model:{value:t.value,callback:function(l){e.$set(t,"value",l)},expression:"vi.value"}})],1),e._v(" "),r>0?l("el-form-item",{staticStyle:{"padding-left":"25px"},attrs:{label:""}},[l("i",{staticClass:"el-icon-delete",on:{click:function(t){e.delEnumerateItem(r,i)}}})]):e._e()],1)}),e._v(" "),l("el-form-item",{staticClass:"w100p",attrs:{label:" "},scopedSlots:e._u([{key:"default",fn:function(t){return[l("a",{staticClass:"addbtn",attrs:{href:"javascript:void(0);"},on:{click:function(t){e.addEnumerateItem(i)}}},[l("i",{staticClass:"el-icon-plus"}),e._v(" 添加更多参数值\n                                            ")])]}}])})]:e._e(),e._v(" "),2==i.key_type?l("div",[l("el-form-item",{staticClass:"w100p mt0 pl8",attrs:{label:"参数范围值"}},[i.value_list[1]?l("el-form-item",{attrs:{label:"",prop:"value_list."+a+".list."+s+".value_list.1.value",rules:[{required:!0,message:"最小值不能为空"},{type:"number",message:"最小值为数字"}]}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入数据最小值"},model:{value:i.value_list[1].value,callback:function(t){e.$set(i.value_list[1],"value",e._n(t))},expression:"em.value_list[1].value"}})],1):e._e(),e._v(" "),i.value_list[2]?l("el-form-item",{attrs:{label:"",prop:"value_list."+a+".list."+s+".value_list.2.value",rules:[{required:!0,message:"最大值不能为空"},{type:"number",message:"最大值为数字"}]}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入数据最大值"},model:{value:i.value_list[2].value,callback:function(t){e.$set(i.value_list[2],"value",e._n(t))},expression:"em.value_list[2].value"}})],1):e._e()],1)],1):e._e(),e._v(" "),s>0?l("div",{staticStyle:{"text-align":"right"}},[l("span",{staticClass:"el-icon-delete",attrs:{title:"删除参数"},on:{click:function(l){e.deleteAttr(t,s)}}})]):e._e()],2)}),e._v(" "),l("a",{staticClass:"addAttr",attrs:{href:"javascript:void(0);"},on:{click:function(l){e.addAttribute(t)}}},[l("i",{staticClass:"el-icon-plus"}),e._v(" 新增属性")])]:e._e()],2),e._v(" "),a>0?l("div",{staticStyle:{"text-align":"right"}},[l("span",{staticClass:"el-icon-delete",attrs:{title:"删除参数"},on:{click:function(t){e.deleteParams(a)}}})]):e._e()],1)])}),e._v(" "),l("div",{staticClass:"buttonPos"},[l("el-button",{staticClass:"addParams",attrs:{type:"ghost"},on:{click:e.addParams}},[e._v("新增参数")])],1)],2),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.confirmTechnical}},[e._v("添 加")])],1)],1)],1)},i=[],s={render:a,staticRenderFns:i};t.a=s},hGun:function(e,t,l){t=e.exports=l("FZ+f")(!0),t.push([e.i,".addParams[data-v-554fb597]{margin-top:15px}.addAttr[data-v-554fb597]{margin-left:140px;color:#409eff}.w100p[data-v-554fb597]{width:100%}.w50p[data-v-554fb597]{width:50%}.input-width[data-v-554fb597]{width:285px}.addbtn[data-v-554fb597]{font-size:12px;color:#409eff}.first-item[data-v-554fb597],.sec-item[data-v-554fb597]{border:1px dashed #d2d2d2;padding-top:15px}.sec-item[data-v-554fb597]{width:98%}.mt0[data-v-554fb597]{margin-bottom:0}.pl8 .el-form-item__label[data-v-554fb597]{padding-left:10px}","",{version:3,sources:["F:/PomeloHomeOpen_Sys/src/views/typeManagement/addAttribute.vue"],names:[],mappings:"AACA,4BACI,eAAiB,CACpB,AACD,0BACI,kBAAmB,AACnB,aAAe,CAClB,AACD,wBACI,UAAY,CACf,AACD,uBACI,SAAW,CACd,AACD,8BACI,WAAa,CAChB,AACD,yBACI,eAAgB,AAChB,aAAc,CACjB,AAKD,wDAHI,0BAA2B,AAC3B,gBAAkB,CAMrB,AAJD,2BAGI,SAAW,CACd,AACD,sBACI,eAAiB,CACpB,AACD,2CACI,iBAAmB,CACtB",file:"addAttribute.vue",sourcesContent:["\n.addParams[data-v-554fb597]{\n    margin-top: 15px;\n}\n.addAttr[data-v-554fb597]{\n    margin-left: 140px;\n    color: #409EFF;\n}\n.w100p[data-v-554fb597]{\n    width: 100%;\n}\n.w50p[data-v-554fb597]{\n    width: 50%;\n}\n.input-width[data-v-554fb597]{\n    width: 285px;\n}\n.addbtn[data-v-554fb597]{\n    font-size: 12px;\n    color:#409EFF;\n}\n.first-item[data-v-554fb597]{\n    border: 1px dashed #d2d2d2;\n    padding-top: 15px;\n}\n.sec-item[data-v-554fb597]{\n    border: 1px dashed #d2d2d2;\n    padding-top: 15px;\n    width: 98%;\n}\n.mt0[data-v-554fb597]{\n    margin-bottom: 0;\n}\n.pl8 .el-form-item__label[data-v-554fb597]{\n    padding-left: 10px;\n}\n"],sourceRoot:""}])},i224:function(e,t,l){"use strict";function a(e){l("2YLH")}Object.defineProperty(t,"__esModule",{value:!0});var i=l("qQ+c"),s=l("RZY1"),r=l("VU/8"),n=a,o=r(i.a,s.a,!1,n,"data-v-554fb597",null);t.default=o.exports},"qQ+c":function(e,t,l){"use strict";var a=l("mvHQ"),i=l.n(a),s=l("Vo7i"),r=(l("TIfe"),{method:[],key:"",type:"string",key_type:1,unit:"",value_list:[{value:"",value_des:""}],remark:""}),n={method:[],key:"",type:"string",key_type:1,remark:"",unit:"",value_list:[{value:"",value_des:""}],list:[r]};t.a={props:["typeid","token","visible","attrid"],computed:{},created:function(){},mounted:function(){},data:function(){var e=i()(n);return{top:window.innerHeight-660>0?(window.innerHeight-660)/2+"px":"0px",dialogTitle:"新建属性参数",hulian_value:!0,isChooseObject:!1,form_string:e,form:{token:this.token,type_id:this.typeid,nodeid:"",is_default:1,value_list:[JSON.parse(e)]},rules:{nodeid:[{required:!0,message:"属性名称不能为空"},{min:1,max:32,message:"属性名称最多32个字符"},{validator:this.letterAndUnderscode}]}}},watch:{attrid:function(e){e?(this.getAttr(e),this.dialogTitle="编辑属性参数"):this.dialogTitle="新建属性参数"}},methods:{getAttr:function(e){var t=this;Object(s.a)({url:"/attribute/info",method:"post",data:{attr_id:e}}).then(function(e){t.form.nodeid=e.ret.nodeid,t.form.is_default=e.ret.is_default,e.ret.value_list.forEach(function(e){e.list||(e.list=[JSON.parse(i()(r))]),e.value_list||(e.value_list=[{value:"",value_des:""}])}),t.form.value_list=e.ret.value_list})},addParams:function(){this.form.value_list.push(JSON.parse(this.form_string))},deleteParams:function(e){this.form.value_list.splice(e,1)},addAttribute:function(e){var t=i()(r);e.list.push(JSON.parse(t))},deleteAttr:function(e,t){e.list.splice(t,1)},changeTypeValue:function(e,t){var l=[{value:1,value_des:"类型"},{value:"",value_des:"最小值"},{value:"",value_des:"最大值"}],a=[{value:"",value_des:""}];"int"==e?(t.key_type=2,t.value_list=l):"object"==e?t.key_type=3:(t.key_type=1,t.value_list=a)},addEnumerateItem:function(e){e.value_list.push({value:"",value_des:""})},delEnumerateItem:function(e,t){t.value_list.splice(e,1)},closeDialog:function(){this.$refs.attForm.resetFields(),this.form.value_list=[JSON.parse(this.form_string)],this.$emit("close-dialog")},confirmTechnical:function(){var e=this;this.$refs.attForm.validate(function(t){if(t){var l=i()(e.form),a=JSON.parse(l);a.value_list.forEach(function(e){"3"==e.key_type?delete e.value_list:delete e.list}),e.attrid&&(a.attr_id=e.attrid),Object(s.a)({url:e.attrid?"/attribute/edit":"/attribute/add",method:"post",data:a}).then(function(t){e.$emit("fresh-list"),e.closeDialog()})}})},letterAndUnderscode:function(e,t,l){var a=!0;if(!t)return void l();for(var i=0;i<t.length;i++){var s=t.charCodeAt(i);if(!(s>=65&&s<=90||s>=97&&s<=122||95==s||s>=33&&s<=46||s>=48&&s<=57)){a=!1,l("只能是字母下划线");break}}a&&l()},unCN:function(e,t,l){/[\u4e00-\u9fa5]+/g.test(t)?l("不支持中文汉字"):l()},lengthLimit:function(e,t,l,a){l&&l.length>e?a("长度不能超过"+e+"字符"):a()}}}}});
//# sourceMappingURL=39.51515f09f223b2f8f979.js.map