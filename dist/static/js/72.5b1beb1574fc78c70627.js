webpackJsonp([72],{"3NCs":function(t,e,a){(t.exports=a("BkJT")(!0)).push([t.i,".table-container{margin-top:20px;padding-bottom:60px}.frt{float:right;margin-left:12px}","",{version:3,sources:["E:/workespace/PomeloHomeOpen_Sys/src/views/typeManagement/deviceManager.vue"],names:[],mappings:"AACA,iBACI,gBAAiB,AACjB,mBAAqB,CACxB,AACD,KACI,YAAa,AACb,gBAAkB,CACrB",file:"deviceManager.vue",sourcesContent:["\n.table-container{\n    margin-top: 20px;\n    padding-bottom: 60px;\n}\n.frt{\n    float: right;\n    margin-left: 12px;\n}\n"],sourceRoot:""}])},pZRS:function(t,e,a){var n=a("3NCs");(n="string"==typeof n?[[t.i,n,""]]:n).locals&&(t.exports=n.locals);a("8bSs")("0247ce27",n,!0)},z8TS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("4YfN"),i=a.n(n),s=a("Vo7i"),l=(a("VSB1"),a("TIfe")),r={name:"ExistedCategory",data:function(){return{deviceAddTypeList:[],addFucSetModal:!1,addFucForm:[],token:Object(l.b)(),typeTree:[],childType:[],businessList:[],brandType:[],type_id:"",child_id:"",business_id:"",add_type:"",brand_id:"",listQuery:{page:1,limit:15},tableData:[],total:0,listLoading:!1}},computed:{},watch:{business_id:function(t,e){this.brand_id="",this.business_id||(this.brandType=[])}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.getList(),t.getAddType(),t.getTypeTree(),t.getBusinessList(),t.getDeviceAddtype()})},methods:{handleSizeChange:function(t){this.listQuery.limit=t,this.listQuery.page=1,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},getList:function(){var e=this;this.listLoading=!0;var t={page:this.listQuery.page,token:Object(l.b)(),limit:this.listQuery.limit,type_id:null==this.child_id?"":this.child_id,parent_type_id:null==this.type_id?"":this.type_id,business_id:null==this.business_id?"":this.business_id,brand_id:null==this.brand_id?"":this.brand_id,add_type:null==this.add_type?"":this.add_type};t.add_type||delete t.add_type,Object(s.a)({url:"/device/deviceList",method:"post",data:i()({},t)}).then(function(t){e.listLoading=!1,e.tableData=t.data,e.total=t.total,e.$nextTick(function(){e.$refs.pagination.internalCurrentPage=t.current_page})}).catch(function(t){e.$message({type:"error",message:t.msg})})},getTypeTree:function(){var e=this;Object(s.a)({url:"/producttype/tree",method:"post",data:{}}).then(function(t){e.typeTree=t})},getBusinessList:function(){var e=this;Object(s.a)({url:"/user/select",method:"get",data:{}}).then(function(t){e.businessList=t})},changeType:function(e){var t=this.typeTree.find(function(t){return t.type_id==parseInt(e)});this.childType=t?t.children:[],this.child_id=""},changeBrandType:function(e){this.brandType=this.businessList.find(function(t){return t.business_id===e})?this.businessList.find(function(t){return t.business_id===e}).brand:[]},handleEnterPage:function(t){this.$router.push({path:"/typeManagement/deviceDetail",query:{id:t.id}})},addDevice:function(){this.$router.push({path:"/typeManagement/addDevice"})},getDeviceAddtype:function(){var e=this;Object(s.a)({url:"/device/deviceAddtype",method:"post",data:{}}).then(function(t){e.deviceAddTypeList=t})},getAddType:function(){var e=this;Object(s.a)({url:"/device/getAddtype",method:"post",data:{}}).then(function(t){e.addFucForm=t,e.addFucForm.forEach(function(t,e){t.status=!!t.status})}).catch(function(t){e.$message({type:"error",message:t.msg})})},addFuc:function(){var e=this;this.addFucForm.forEach(function(t,e){t.status=t.status?1:0}),Object(s.a)({url:"/device/setAddtype",method:"post",data:{token:this.token,settings:this.addFucForm}}).then(function(t){e.$message({type:"success",message:"修改设置成功"}),e.addFucSetModal=!1,e.addFucForm.forEach(function(t,e){t.status=!!t.status})}).catch(function(t){e.$message({type:"error",message:t.msg})})},search:function(){this.getList()}}},n={render:function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"app-container calendar-list-container"},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:24}},[n("el-button",{attrs:{type:"primary"},on:{click:a.addDevice}},[a._v("新增引导页")]),a._v(" "),n("el-button",{attrs:{type:"ghost"},on:{click:function(t){a.addFucSetModal=!0}}},[a._v("客户端添加设备设置")]),a._v(" "),n("el-button",{staticClass:"frt",attrs:{type:"primary"},on:{click:function(t){return a.handleCurrentChange(1)}}},[a._v("查找")]),a._v(" "),n("el-select",{staticClass:"frt",attrs:{clearable:"",placeholder:"全部厂商"},on:{change:a.changeBrandType},model:{value:a.business_id,callback:function(t){a.business_id=t},expression:"business_id"}},a._l(a.businessList,function(t,e){return n("el-option",{key:e,attrs:{label:t.name,value:t.business_id}})}),1),a._v(" "),n("el-select",{staticClass:"frt",attrs:{clearable:"",placeholder:"全部子品类"},model:{value:a.child_id,callback:function(t){a.child_id=t},expression:"child_id"}},a._l(a.childType,function(t,e){return n("el-option",{key:e,attrs:{label:t.name,value:t.type_id}})}),1),a._v(" "),n("el-select",{staticClass:"frt",attrs:{clearable:"",placeholder:"全部大品类"},on:{change:a.changeType},model:{value:a.type_id,callback:function(t){a.type_id=t},expression:"type_id"}},a._l(a.typeTree,function(t,e){return n("el-option",{key:e,attrs:{label:t.name,value:t.type_id}})}),1)],1),a._v(" "),n("el-col",{staticStyle:{paddingRight:"307px",paddingTop:"10px"},attrs:{span:24}},[n("el-select",{staticClass:"frt",attrs:{clearable:"",placeholder:"添加方式"},model:{value:a.add_type,callback:function(t){a.add_type=t},expression:"add_type"}},a._l(a.deviceAddTypeList,function(t,e){return n("el-option",{key:e,attrs:{label:t.type_name,value:t.type_id}})}),1),a._v(" "),n("el-select",{staticClass:"frt",attrs:{clearable:"",placeholder:"品牌"},model:{value:a.brand_id,callback:function(t){a.brand_id=t},expression:"brand_id"}},a._l(a.brandType,function(t,e){return n("el-option",{key:e,attrs:{label:t.brand_name,value:t.brand_id}})}),1)],1)],1),a._v(" "),n("div",{staticClass:"table-container"},[[n("el-table",{staticStyle:{width:"100%"},attrs:{data:a.tableData,border:"",stripe:""}},[n("el-table-column",{attrs:{prop:"type_name",label:"子品类",width:"220"}}),a._v(" "),n("el-table-column",{attrs:{prop:"parent_type_name",label:"所属大品类",width:"220"}}),a._v(" "),n("el-table-column",{attrs:{prop:"business_name",label:"厂商"}}),a._v(" "),n("el-table-column",{attrs:{prop:"brand_name",label:"品牌"}}),a._v(" "),n("el-table-column",{attrs:{prop:"model",label:"产品型号"}}),a._v(" "),n("el-table-column",{attrs:{prop:"add_type_txt",label:"添加方式",width:"150"}}),a._v(" "),n("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"220"}}),a._v(" "),n("el-table-column",{attrs:{label:"操作",width:"130",align:"center"},scopedSlots:a._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary",align:"center"},on:{click:function(t){return a.handleEnterPage(e.row)}}},[a._v("编辑")])]}}])})],1),a._v(" "),n("el-pagination",{ref:"pagination",attrs:{"current-page":a.listQuery.page,"page-sizes":[15,20,30,50],"page-size":a.listQuery.limit,total:a.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return a.$set(a.listQuery,"page",t)},"update:current-page":function(t){return a.$set(a.listQuery,"page",t)},"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})]],2),a._v(" "),n("el-dialog",{attrs:{visible:a.addFucSetModal,title:"客户端添加设备设置",width:"30%"},on:{"update:visible":function(t){a.addFucSetModal=t}}},[n("span",{staticClass:"danger",staticStyle:{display:"inline-block","margin-bottom":"20px"}},[a._v("该设置影响客户端能否添加设备，请确认后谨慎操作")]),a._v(" "),a._l(a.addFucForm,function(e){return n("div",[n("el-checkbox",{model:{value:e.status,callback:function(t){a.$set(e,"status",t)},expression:"item.status"}},[a._v(a._s(e.name))])],1)}),a._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){a.addFucSetModal=!1}}},[a._v("取 消")]),a._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:a.addFuc}},[a._v("确 定")])],1)],2)],1)},staticRenderFns:[]};n=a("C7Lr")(r,n,!1,function(t){a("pZRS")},null,null),e.default=n.exports}});