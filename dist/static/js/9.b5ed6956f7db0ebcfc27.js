webpackJsonp([9],{"1H6C":function(e,t,r){var n=function(){return this}()||Function("return this")(),a=n.regeneratorRuntime&&0<=Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime"),i=a&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r("HhN8"),a)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},EmJ6:function(e,t,r){(e.exports=r("FZ+f")(!0)).push([e.i,".col[data-v-5e1af848]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.col span[data-v-5e1af848]{display:block;width:50px}.imgContent[data-v-5e1af848]{line-height:80px}.imgContent[data-v-5e1af848] .el-upload--picture-card{width:80px;height:76px;line-height:80px}.imgContent[data-v-5e1af848] .el-upload-list--picture-card .el-upload-list__item{width:80px;height:76px}.tx-r[data-v-5e1af848]{text-align:right}","",{version:3,sources:["/Users/eric/PomeloHomeOpen_Sys/src/views/typeManagement/addCard.vue"],names:[],mappings:"AACA,sBACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,wBAAyB,AACrB,qBAAsB,AAClB,uBAAwB,AAChC,yBAA0B,AACtB,sBAAuB,AACnB,kBAAoB,CAC7B,AACD,2BACI,cAAe,AACf,UAAY,CACf,AACD,6BACE,gBAAkB,CACnB,AACD,sDACI,WAAY,AACZ,YAAa,AACb,gBAAkB,CACrB,AACD,iFACI,WAAY,AACZ,WAAa,CAChB,AACD,uBACE,gBAAkB,CACnB",file:"addCard.vue",sourcesContent:["\n.col[data-v-5e1af848] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.col span[data-v-5e1af848] {\n    display: block;\n    width: 50px;\n}\n.imgContent[data-v-5e1af848] {\n  line-height: 80px;\n}\n.imgContent[data-v-5e1af848] .el-upload--picture-card {\n    width: 80px;\n    height: 76px;\n    line-height: 80px;\n}\n.imgContent[data-v-5e1af848] .el-upload-list--picture-card .el-upload-list__item {\n    width: 80px;\n    height: 76px;\n}\n.tx-r[data-v-5e1af848] {\n  text-align: right;\n}\n"],sourceRoot:""}])},HhN8:function(S,e){!function(e){"use strict";var c,t=Object.prototype,l=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag",o="object"==typeof S,s=e.regeneratorRuntime;if(s)o&&(S.exports=s);else{(s=e.regeneratorRuntime=o?S.exports:{}).wrap=x;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",m={},u={};u[a]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(B([])));v&&v!==t&&l.call(v,a)&&(u=v);var y=A.prototype=b.prototype=Object.create(u);C.prototype=y.constructor=A,A.constructor=C,A[i]=C.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,A):(e.__proto__=A,i in e||(e[i]="GeneratorFunction")),e.prototype=Object.create(y),e},s.awrap=function(e){return{__await:e}},w(k.prototype),k.prototype[n]=function(){return this},s.AsyncIterator=k,s.async=function(e,t,r,n){var a=new k(x(e,t,r,n));return s.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},w(y),y[i]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},s.keys=function(r){var n=[];for(var e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=B,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return i.type="throw",i.arg=r,n.next=e,t&&(n.method="next",n.arg=c),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var a=this.tryEntries[t],i=a.completion;if("root"===a.tryLoc)return e("end");if(a.tryLoc<=this.prev){var o=l.call(a,"catchLoc"),s=l.call(a,"finallyLoc");if(o&&s){if(this.prev<a.catchLoc)return e(a.catchLoc,!0);if(this.prev<a.finallyLoc)return e(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return e(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return e(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:B(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=c),m}}}function x(e,t,r,n){var i,o,s,c,a=t&&t.prototype instanceof b?t:b,l=Object.create(a.prototype),u=new O(n||[]);return l._invoke=(i=e,o=r,s=u,c=d,function(e,t){if(c===f)throw new Error("Generator is already running");if(c===h){if("throw"===e)throw t;return j()}for(s.method=e,s.arg=t;;){var r=s.delegate;if(r){var n=I(r,s);if(n){if(n===m)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===d)throw c=h,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=f;var a=_(i,o,s);if("normal"===a.type){if(c=s.done?h:p,a.arg===m)continue;return{value:a.arg,done:s.done}}"throw"===a.type&&(c=h,s.method="throw",s.arg=a.arg)}}),l}function _(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function b(){}function C(){}function A(){}function w(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function k(c){var t;this._invoke=function(r,n){function e(){return new Promise(function(e,t){!function t(e,r,n,a){var i=_(c[e],c,r);if("throw"!==i.type){var o=i.arg,s=o.value;return s&&"object"==typeof s&&l.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,n,a)},function(e){t("throw",e,n,a)}):Promise.resolve(s).then(function(e){o.value=e,n(o)},a)}a(i.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function I(e,t){var r=e.iterator[t.method];if(r===c){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=c,I(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=_(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,m;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=c),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function B(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=c,e.done=!0,e};return n.next=n}}return{next:j}}function j(){return{value:c,done:!0}}}(function(){return this}()||Function("return this")())},JwpK:function(e,t,r){var n=r("EmJ6");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r("rjj0")("6b7b0fc0",n,!0)},UyAJ:function(e,t,r){"use strict";t.c=function(e){return Object(n.a)({url:"/api/ext/devcard/template",method:"get",data:e})},t.d=function(e){return Object(n.a)({url:"/api/ext/devcard/template",method:"post",data:e})},t.b=function(){return Object(n.a)({url:"/api/ext/devcard/size",method:"get"})},t.a=function(e){return Object(n.a)({url:"/api/ext/devcard/size",method:"post",data:e})};var n=r("Vo7i")},Xxa5:function(e,t,r){e.exports=r("1H6C")},eXaO:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("fZjL"),o=r.n(n),a=r("Xxa5"),i=r.n(a),s=r("exGp"),c=r.n(s),l=r("TIfe"),u=r("Vo7i");function d(e){return Object(u.a)({url:"api/ext/devcard/rect",method:"post",data:e})}var p=r("UyAJ"),f={data:function(){return{andImgList:[],iosImgList:[],ipadImgList:[],cardList:[],dataList:[],dialogImageUrl:"",dialogVisible:!1,and_base_img:{type:12,token:Object(l.b)()},ios_base_img:{type:12,token:Object(l.b)()},ipad_base_img:{type:12,token:Object(l.b)()},formVisible:!1,formItem:{},checked:{},addOperateImages:{}}},created:function(){var t=this;return c()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCardSizeList();case 2:t.getRectCard();case 3:case"end":return e.stop()}},e,t)}))()},mounted:function(){},methods:{getRectCard:function(){var t=this;Object(u.a)({url:"api/ext/devcard/rect",method:"get"}).then(function(e){e.data.forEach(function(r){r.checked={},t.cardList.forEach(function(e){r.checked[e.x+","+e.y]=!1});var n={};o()(r.images).forEach(function(t){r.images;r.images[t][0]&&r.images[t][0].forEach(function(e){e.url=e.img,e.op=2,e.x=t.split(",")[0],e.y=t.split(",")[1],e.os=0,n[e.imgid]=e}),r.images[t][1]&&r.images[t][1].forEach(function(e){e.url=e.img,e.op=2,e.x=t.split(",")[0],e.y=t.split(",")[1],e.os=1,n[e.imgid]=e}),r.images[t][2]&&r.images[t][2].forEach(function(e){e.url=e.img,e.op=2,e.x=t.split(",")[0],e.y=t.split(",")[1],e.os=2,n[e.imgid]=e})}),r.operateImages=n}),t.dataList=e.data})},getCardSizeList:function(){var t=this;Object(p.b)({}).then(function(e){e.data.forEach(function(e){e.checked=!1,e.andImgList=[],e.iosImgList=[],e.ipadImgList=[]}),t.cardList=e.data})},resetCardCheck:function(){this.cardList.forEach(function(e){e.checked=!1})},addCard:function(){this.formVisible=!0,this.formItem={},this.addOperateImages={},this.resetCardCheck()},addNewCard:function(){var a=this,i=[];o()(this.addOperateImages).forEach(function(t){var r=a.addOperateImages[t].x,n=a.addOperateImages[t].y;a.cardList.forEach(function(e){!e.checked||parseInt(e.x)!==parseInt(r)||parseInt(e.y)!==parseInt(n)||1!==a.addOperateImages[t].op&&3!==a.addOperateImages[t].op||i.push(a.addOperateImages[t])})}),this.formItem.operator=1,this.formItem.images=i,d(this.formItem).then(function(e){200===e.code?(a.$message({message:"保存添加成功",type:"success"}),a.formVisible=!1,a.getRectCard()):a.$message.error("卡片添加失败")})},save:function(n){var t=this,e={operator:2,rect_id:n.rect_id,rect_name:n.rect_name,images:[]},a=[];o()(n.operateImages).forEach(function(e){var t=n.operateImages[e].x,r=n.operateImages[e].y;n.checked[t+","+r]&&a.push(n.operateImages[e])}),e.images=a,d(e).then(function(e){200===e.code?(t.$message({message:"保存修改成功",type:"success"}),t.getRectCard()):t.$message.error("保存修改失败")})},del:function(e){var t=this,r={rect_id:e.rect_id,rect_name:e.rect_name,operator:3};this.$confirm("确认取消？").then(function(){d(r).then(function(e){200===e.code?(t.$message({message:"删除成功",type:"success"}),t.getRectCard()):t.$message.error("删除失败")})})},checkChange:function(){},handleChange:function(e,t){this.fileList=t.slice(-3)},uploadSuccess:function(r,n,a){return function(e){var t={x:n.x,y:n.y,os:a,name:e.result.filename,img:e.result.object,op:1};r.operateImages[e.result.md5]=t}},removeSuccess:function(a){return function(e,t){if(e.response){var r=e.response.result.md5;delete a.operateImages[r]}else{var n=e.imgid;a.operateImages[n].op=3}}},handleUpload:function(r,n){var a=this;return function(e){var t={x:r.x,y:r.y,os:n,name:e.result.filename,img:e.result.object,op:1};a.addOperateImages[e.result.md5]=t}},handleremove:function(e){var t=e.response.result.md5;delete this.addOperateImages[t]},imageChange:function(e,t){this.imgList=t.slice(-3)},imageSuccess:function(){},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}},h={render:function(){var n=this,e=n.$createElement,a=n._self._c||e;return a("div",{staticClass:"app-container calendar-list-container"},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:n.addCard}},[n._v("\n      新增卡片\n    ")])],1),n._v(" "),a("div",n._l(n.dataList,function(r,t){return a("el-card",{key:t,staticClass:"box-card"},[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-col",{staticClass:"col",attrs:{span:5}},[a("span",[n._v("名称:")]),n._v(" "),a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:r.rect_name,callback:function(e){n.$set(r,"rect_name",e)},expression:"item.rect_name"}})],1),n._v(" "),a("el-col",{staticClass:"col",staticStyle:{"margin-left":"10px"},attrs:{span:5}},[a("span",[n._v("\n            ID:\n          ")]),n._v(" "),a("el-input",{attrs:{disabled:"",placeholder:"请输入ID"},model:{value:r.rect_id,callback:function(e){n.$set(r,"rect_id",e)},expression:"item.rect_id"}})],1),n._v(" "),a("el-col",{attrs:{span:1,offset:10}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){n.save(r,t)}}},[n._v("\n            保存\n          ")])],1),n._v(" "),a("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:1}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){n.del(r,t)}}},[n._v("\n            删除\n          ")])],1)],1),n._v(" "),n._l(n.cardList,function(t,e){return a("el-row",{key:e,staticClass:"imgContent"},[a("el-col",{staticClass:"checkContent",attrs:{span:1}},[a("el-checkbox",{model:{value:r.checked[t.x+","+t.y],callback:function(e){n.$set(r.checked,t.x+","+t.y,e)},expression:"item.checked[ele.x+','+ele.y]"}},[n._v(n._s(t.x+"*"+t.y))])],1),n._v(" "),a("el-col",{attrs:{span:23}},[a("el-col",{attrs:{span:2}},[n._v("安卓图片：")]),n._v(" "),a("el-col",{attrs:{span:22}},[a("el-upload",{attrs:{"on-success":n.uploadSuccess(r,t,0),data:n.and_base_img,"file-list":r.images&&r.images[t.x+","+t.y]&&r.images[t.x+","+t.y][0]?r.images[t.x+","+t.y][0]:[],"on-remove":n.removeSuccess(r),action:"/api/index.php/files/save","list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"})])],1),n._v(" "),a("el-col",{attrs:{span:2}},[n._v("IOS图片：")]),n._v(" "),a("el-col",{attrs:{span:22}},[a("el-upload",{attrs:{"on-success":n.uploadSuccess(r,t,1),data:n.ios_base_img,"file-list":r.images&&r.images[t.x+","+t.y]&&r.images[t.x+","+t.y][1]?r.images[t.x+","+t.y][1]:[],"on-remove":n.removeSuccess(r),action:"/api/index.php/files/save","list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"})])],1),n._v(" "),a("el-col",{attrs:{span:2}},[n._v("面板图片：")]),n._v(" "),a("el-col",{attrs:{span:22}},[a("el-upload",{attrs:{"on-success":n.uploadSuccess(r,t,2),data:n.ipad_base_img,"file-list":r.images&&r.images[t.x+","+t.y]&&r.images[t.x+","+t.y][2]?r.images[t.x+","+t.y][2]:[],"on-remove":n.removeSuccess(r),action:"/api/index.php/files/save","list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1)})],2)})),n._v(" "),a("el-dialog",{attrs:{visible:n.dialogVisible},on:{"update:visible":function(e){n.dialogVisible=e}}},[a("img",{attrs:{src:n.dialogImageUrl,width:"100%",alt:""}})]),n._v(" "),a("el-dialog",{attrs:{visible:n.formVisible,title:"添加卡片"},on:{"update:visible":function(e){n.formVisible=e}}},[a("el-form",{staticClass:"form",attrs:{"label-width":"200px"}},[a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{type:"input"},model:{value:n.formItem.rect_id,callback:function(e){n.$set(n.formItem,"rect_id",e)},expression:"formItem.rect_id"}})],1),n._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{type:"input"},model:{value:n.formItem.rect_name,callback:function(e){n.$set(n.formItem,"rect_name",e)},expression:"formItem.rect_name"}})],1),n._v(" "),n._l(n.cardList,function(t,e){return a("el-row",{key:e,staticClass:"imgContent",attrs:{span:24}},[a("el-col",{staticClass:"checkContent",attrs:{span:3}},[a("el-checkbox",{model:{value:t.checked,callback:function(e){n.$set(t,"checked",e)},expression:"item.checked"}},[n._v("\n            "+n._s(t.x)+"*"+n._s(t.y)+"\n          ")])],1),n._v(" "),a("el-col",{attrs:{span:21}},[a("el-col",{attrs:{span:4}},[n._v("安卓图片：")]),n._v(" "),a("el-col",{attrs:{span:17}},[a("el-upload",{attrs:{"on-preview":n.handlePictureCardPreview,data:n.and_base_img,"file-list":t.androidImgList,"on-success":n.handleUpload(t,0),"on-remove":n.handleremove,action:"/api/index.php/files/save","list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"})])],1),n._v(" "),a("el-col",{attrs:{span:4}},[n._v("IOS图片：")]),n._v(" "),a("el-col",{attrs:{span:17}},[a("el-upload",{attrs:{"on-preview":n.handlePictureCardPreview,data:n.ios_base_img,"file-list":t.iosImgList,"on-success":n.handleUpload(t,1),"on-remove":n.handleremove,action:"/api/index.php/files/save","list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"})])],1),n._v(" "),a("el-col",{attrs:{span:4}},[n._v("面板图片：")]),n._v(" "),a("el-col",{attrs:{span:17}},[a("el-upload",{attrs:{"on-preview":n.handlePictureCardPreview,data:n.ipad_base_img,"file-list":t.ipadImgList,"on-success":n.handleUpload(t,2),"on-remove":n.handleremove,action:"/api/index.php/files/save","list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1)})],2),n._v(" "),a("el-row",{staticClass:"tx-r"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:n.addNewCard}},[n._v("\n            确认添加\n          ")])],1)],1)],1)},staticRenderFns:[]};var m=r("VU/8")(f,h,!1,function(e){r("JwpK")},"data-v-5e1af848",null);t.default=m.exports},exGp:function(e,t,r){"use strict";t.__esModule=!0;var n,a=r("//Fk"),c=(n=a)&&n.__esModule?n:{default:n};t.default=function(e){return function(){var s=e.apply(this,arguments);return new c.default(function(i,o){return function t(e,r){try{var n=s[e](r),a=n.value}catch(e){return void o(e)}if(!n.done)return c.default.resolve(a).then(function(e){t("next",e)},function(e){t("throw",e)});i(a)}("next")})}}}});